<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="utf-8" />
  <title>A-Cad√©mie ‚Äî Trail d√©butants : le mat√©riel essentiel</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
  <!-- On est dans /articles ‚Üí chemins relatifs -->
  <link rel="stylesheet" href="../css/acad-style.css">
  <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-app.js"></script>
  <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-auth.js"></script>
  <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-firestore.js"></script>
  <script src="../js/firebase-config.js"></script>
</head>
<body>
  <div class="page">
    <header class="acad-header">
      <a href="../index.html" class="brand" style="text-decoration:none;">
        <div class="brand-logo">A</div>
        <div>
          <div class="brand-text-title">A-Cad√©mie</div>
          <div class="brand-text-sub">Articles & quiz sportifs en libre acc√®s</div>
        </div>
      </a>

      <nav class="acad-nav">
        <a class="nav-btn" href="../index.html"><span class="dot"></span> Accueil</a>
        <a class="nav-btn primary" href="../articles.html">Articles</a>
        <a class="nav-btn" href="../recompenses.html">R√©compenses</a>
      </nav>

      <div id="acad-profile" class="profile-card">
        <div class="profile-main">
          <div class="profile-avatar">A</div>
          <div>
            <div class="profile-level">Niveau <span id="acad-level">1</span></div>
            <div class="profile-xp">
              <span id="acad-xp">0</span> XP locale
            </div>
          </div>
        </div>
        <div class="profile-progress-wrapper">
          <div class="profile-progress-bar">
            <div class="profile-progress-fill" id="acad-xp-bar"></div>
          </div>
          <div class="profile-progress-label">
            <span>Vers niveau <span id="acad-next-level">2</span></span>
            <span id="acad-xp-to-next">0 / 100</span>
          </div>
        </div>
      </div>
    </header>

    <main class="layout">
      <article class="article-card">
        <div class="article-meta">
          <span class="tag"><span class="tag-dot"></span> Trail & Outdoor</span>
          <span class="chip">Lecture : 7 min</span>
          <span class="chip">Niveau : D√©butant</span>
        </div>

        <h1 class="article-title">Trail d√©butants : le mat√©riel essentiel</h1>
        <p class="article-subtitle">
          Tu veux quitter la route pour courir en nature ? Avant de te lancer sur les sentiers,
          voici le mat√©riel essentiel pour pratiquer le trail en s√©curit√©, sans te sur√©quiper.
        </p>

        <div class="article-highlight">
          <strong>√Ä retenir :</strong> pour d√©buter en trail, les priorit√©s sont simples :
          des chaussures adapt√©es, de quoi boire, √™tre visible et prot√©g√© de la m√©t√©o.
        </div>

        <div class="article-content">
          <h2>1Ô∏è‚É£ Chaussures de trail : l‚Äô√©l√©ment num√©ro 1</h2>
          <p>
            Oublie les running route lisses : en trail, tu as besoin d‚Äôaccroche et de stabilit√©.
          </p>
          <ul>
            <li><strong>Semelle avec crampons</strong> pour accrocher sur terrain gras, cailloux, racines.</li>
            <li><strong>Maintien lat√©ral</strong> renforc√© pour limiter les entorses de cheville.</li>
            <li><strong>Protection √† l‚Äôavant du pied</strong> (pare-pierres) contre les cailloux.</li>
          </ul>
          <p>
            Pour d√©buter, inutile d‚Äôaller sur les mod√®les les plus techniques : une paire de trail ‚Äúpolyvalente‚Äù
            suffit largement pour des sorties de 5 √† 15 km sur chemins.
          </p>

          <h2>2Ô∏è‚É£ Sac ou ceinture d‚Äôhydratation</h2>
          <p>
            En nature, tu n‚Äôas pas de fontaine tous les 2 km. Tu dois donc transporter tes propres r√©serves.
          </p>
          <ul>
            <li><strong>Ceinture ou gilet l√©ger</strong> pour les sorties courtes (jusqu‚Äô√† 1 h / 1 h 30).</li>
            <li><strong>Sac de trail 5‚Äì10 L</strong> pour transporter eau, veste, t√©l√©phone, petite alimentation.</li>
            <li><strong>Syst√®me d‚Äôhydratation</strong> : flasques souples √† l‚Äôavant ou poche √† eau dans le dos.</li>
          </ul>
          <p>
            R√®gle simple : d√®s que tu d√©passes 45‚Äì60 minutes de trail, prends toujours de quoi boire.
          </p>

          <h2>3Ô∏è‚É£ V√™tements adapt√©s √† la m√©t√©o</h2>
          <p>
            En trail, la m√©t√©o peut changer vite, surtout en for√™t ou en altitude. Quelques basiques :
          </p>
          <ul>
            <li><strong>1√®re couche respirante</strong> (t-shirt technique, √©viter le coton).</li>
            <li><strong>Couche coupe-vent / d√©perlante</strong> en cas de vent ou de pluie l√©g√®re.</li>
            <li><strong>Short ou collant de course</strong> confortable, qui ne frotte pas.</li>
            <li><strong>En hiver :</strong> gants l√©gers, bonnet ou bandeau, chaussettes un peu plus √©paisses.</li>
          </ul>
          <p>
            L‚Äôobjectif : rester ni tremp√© de sueur, ni frigorifi√©, et pouvoir ajouter/enlever des couches facilement.
          </p>

          <h2>4Ô∏è‚É£ S√©curit√© : visibilit√© et t√©l√©phone</h2>
          <p>
            M√™me sur des sentiers proches de chez toi, pense s√©curit√© :
          </p>
          <ul>
            <li><strong>T√©l√©phone charg√©</strong> dans une poche ou le sac.</li>
            <li><strong>Bracelet ou carte</strong> avec contact d‚Äôurgence si tu pars seul.</li>
            <li><strong>√âl√©ments r√©fl√©chissants</strong> sur la tenue si tu peux croiser des routes ou si la luminosit√© baisse.</li>
          </ul>
          <p>
            Si tu cours t√¥t le matin ou en fin de journ√©e :
          </p>
          <ul>
            <li><strong>Lampe frontale</strong> (m√™me simple) si tu risques de finir dans le noir.</li>
          </ul>

          <h2>5Ô∏è‚É£ B√¢tons : utiles ou pas pour commencer ?</h2>
          <p>
            Pour de petites sorties proches de chez toi, les b√¢tons ne sont pas indispensables.
            En revanche, ils deviennent int√©ressants si :
          </p>
          <ul>
            <li>tu fais beaucoup de d√©nivel√© ;</li>
            <li>tu as des soucis de genoux en descente ;</li>
            <li>tu pr√©pares un trail de montagne.</li>
          </ul>
          <p>
            Pour d√©buter, concentre-toi d‚Äôabord sur les chaussures, l‚Äôhydratation et la tenue.
            Tu pourras ajouter les b√¢tons plus tard si le besoin se fait sentir.
          </p>

          <h2>6Ô∏è‚É£ Alimentation et petits accessoires</h2>
          <ul>
            <li><strong>Barre ou compote √©nerg√©tique</strong> pour les sorties au-del√† d‚Äô1 h 15‚Äì1 h 30.</li>
            <li><strong>Chaussettes de course</strong> adapt√©es (√©viter les grosses coutures).</li>
            <li><strong>Cr√®me anti-frottements</strong> si tu as tendance aux irritations.</li>
          </ul>

          <h2>7Ô∏è‚É£ Budget : par o√π commencer ?</h2>
          <p>Si tu dois prioriser les d√©penses :</p>
          <ol>
            <li><strong>1. Une bonne paire de chaussures de trail polyvalentes.</strong></li>
            <li><strong>2. Un syst√®me simple d‚Äôhydratation (ceinture ou petit sac).</strong></li>
            <li><strong>3. Une tenue respirante adapt√©e √† la m√©t√©o.</strong></li>
          </ol>
          <p>
            Le reste (b√¢tons, frontale tr√®s performante, √©quipements tr√®s techniques) viendra plus tard
            si tu prends go√ªt aux longues sorties et aux courses.
          </p>

          <h2>8Ô∏è‚É£ Erreurs fr√©quentes des d√©butants</h2>

          <h3>Erreur 1 : partir en trail avec des chaussures de route lisses</h3>
          <p>
            Sur terrain humide ou caillouteux, c‚Äôest la glissade assur√©e et le risque de blessure augmente.
          </p>

          <h3>Erreur 2 : ne pas emporter d‚Äôeau ‚Äúparce que c‚Äôest une petite sortie‚Äù</h3>
          <p>
            En mont√©e, en plein soleil ou s‚Äôil fait chaud, 45 minutes peuvent devenir tr√®s longues.
          </p>

          <h3>Erreur 3 : se surcharger d√®s le d√©but</h3>
          <p>
            Partir avec un gros sac plein ‚Äúau cas o√π‚Äù rend la sortie lourde et peu agr√©able.
            Commence simple, sur des parcours adapt√©s √† ton niveau.
          </p>

          <h2>9Ô∏è‚É£ En r√©sum√©</h2>
          <p>
            Pour d√©buter le trail, tu n‚Äôas pas besoin de tout le catalogue outdoor.
            Concentre-toi sur :
          </p>
          <ul>
            <li>des <strong>chaussures de trail</strong> adapt√©es ;</li>
            <li>un <strong>moyen d‚Äôhydratation</strong> (ceinture, gilet ou sac) ;</li>
            <li>une <strong>tenue respirante</strong> et adapt√©e √† la m√©t√©o ;</li>
            <li>un minimum de <strong>s√©curit√©</strong> (t√©l√©phone, visibilit√©).</li>
          </ul>
          <p>
            Ensuite, tu pourras faire √©voluer ton mat√©riel au rythme de ta progression et de tes projets :
            sorties plus longues, courses, montagne, nuit, etc.
          </p>
        </div>

        <div class="article-footer-note">
          <span class="bullet-pill">üéÆ Gamification locale</span>
          <span>Lecture, quiz et partage de cet article te donnent de l‚ÄôXP sur cet appareil.</span>
        </div>

        <button type="button" class="btn btn-secondary" id="mark-article-read">
          ‚úì J‚Äôai lu cet article (gagner de l‚ÄôXP)
        </button>

        <div style="margin-top:12px;">
          <button type="button" class="btn btn-primary" id="share-article">
            üîó Partager cet article / quiz
          </button>
          <div id="share-feedback" style="font-size:12px;color:var(--text-soft);margin-top:4px;"></div>
        </div>
      </article>

      <!-- Quiz -->
      <section class="quiz-card" id="quiz-section">
        <div class="quiz-header">
          <div class="quiz-left">
            <div class="quiz-title">Quiz express : mat√©riel trail d√©butant</div>
            <div class="quiz-caption">5 questions pour v√©rifier si tu as les bases.</div>
          </div>
          <div class="quiz-badge">üèîÔ∏è 5 questions ¬∑ 3‚Äì4 min</div>
        </div>

        <div class="quiz-progress" id="quiz-progress">
          Question 1 sur 5
        </div>

        <form id="quiz-form"></form>

        <div class="quiz-footer">
          <div class="quiz-actions">
            <button type="button" class="btn btn-primary" id="quiz-submit">
              Valider mes r√©ponses
            </button>
            <button type="button" class="btn btn-secondary" id="quiz-reset">
              Recommencer le quiz
            </button>
          </div>
          <div class="quiz-result" id="quiz-result">
            R√©ponds aux questions puis valide pour voir ton score.
          </div>
        </div>

        <div class="quiz-feedback" id="quiz-feedback"></div>
      </section>
    </main>
  </div>

  <script src="../js/acad-gamification.js"></script>
  <script src="../js/acad-firebase-sync.js"></script>
  <script>
    const ARTICLE_ID = "trail-debutants-materiel";

    const quizData = [
      {
        id: 1,
        question: "Quel est l‚Äô√©l√©ment le plus important pour d√©buter en trail ?",
        options: [
          "Un gros sac √† dos de randonn√©e",
          "Des chaussures de trail avec une semelle √† crampons",
          "Des b√¢tons carbone haut de gamme",
          "Un GPS dernier cri"
        ],
        correctIndex: 1
      },
      {
        id: 2,
        question: "Pourquoi un syst√®me d‚Äôhydratation est-il important ?",
        options: [
          "Parce que l‚Äôeau est obligatoire en comp√©tition seulement",
          "Parce qu‚Äôen nature, il n‚Äôy a pas toujours de points d‚Äôeau",
          "Pour porter plus de poids",
          "Uniquement pour les sorties de plus de 4 heures"
        ],
        correctIndex: 1
      },
      {
        id: 3,
        question: "Quel v√™tement est √† privil√©gier pour le haut du corps ?",
        options: [
          "Un t-shirt en coton √©pais",
          "Un t-shirt technique respirant",
          "Un pull en laine",
          "Un maillot en jean"
        ],
        correctIndex: 1
      },
      {
        id: 4,
        question: "Les b√¢tons de trail sont-ils indispensables pour d√©buter ?",
        options: [
          "Oui, absolument",
          "Non, surtout si tu fais des petites sorties peu pentues",
          "Oui, d√®s 5 km",
          "Ils sont interdits aux d√©butants"
        ],
        correctIndex: 1
      },
      {
        id: 5,
        question: "Quelle erreur est fr√©quente chez les d√©butants en trail ?",
        options: [
          "Partir avec des chaussures de route lisses",
          "Prendre une petite gourde d‚Äôeau",
          "Mettre une veste coupe-vent",
          "Emporter son t√©l√©phone charg√©"
        ],
        correctIndex: 0
      }
    ];

    const quizForm = document.getElementById("quiz-form");
    const quizProgress = document.getElementById("quiz-progress");
    const quizResult = document.getElementById("quiz-result");
    const quizFeedback = document.getElementById("quiz-feedback");
    const submitBtn = document.getElementById("quiz-submit");
    const resetBtn = document.getElementById("quiz-reset");

    function renderQuiz() {
      quizForm.innerHTML = "";
      quizData.forEach((q, index) => {
        const questionDiv = document.createElement("div");
        questionDiv.className = "quiz-question";
        questionDiv.dataset.questionId = q.id;

        questionDiv.innerHTML = `
          <div class="quiz-question-header">
            <div class="quiz-question-label">Q${index + 1}. ${q.question}</div>
            <div class="quiz-question-meta">1 seule bonne r√©ponse</div>
          </div>
          <div class="quiz-options">
            ${q.options
              .map(
                (opt, optIndex) => `
              <label class="quiz-option">
                <input type="radio" name="question-${q.id}" value="${optIndex}">
                <span>${opt}</span>
              </label>
            `
              )
              .join("")}
          </div>
        `;

        quizForm.appendChild(questionDiv);
      });

      quizProgress.textContent = "Question 1 sur " + quizData.length;
      quizResult.innerHTML = "R√©ponds aux questions puis valide pour voir ton score.";
      quizFeedback.textContent = "";
    }

    function updateProgress() {
      const total = quizData.length;
      const answered = quizData.filter((q) => {
        const radios = document.querySelectorAll('input[name="question-' + q.id + '"]');
        return Array.from(radios).some((r) => r.checked);
      }).length;

      const current = Math.max(1, answered);
      quizProgress.textContent = "Question " + current + " sur " + total;
    }

    quizForm.addEventListener("change", updateProgress);

    function evaluateQuiz() {
      let score = 0;
      const total = quizData.length;

      document.querySelectorAll(".quiz-option").forEach((opt) => {
        opt.classList.remove("correct", "incorrect");
      });

      quizData.forEach((q) => {
        const radios = document.querySelectorAll('input[name="question-' + q.id + '"]');
        let selectedIndex = null;

        radios.forEach((r, idx) => {
          if (r.checked) selectedIndex = idx;
        });

        const questionDiv = document.querySelector('.quiz-question[data-question-id="' + q.id + '"]');
        const optionLabels = questionDiv.querySelectorAll(".quiz-option");

        if (selectedIndex === q.correctIndex) {
          score++;
          if (selectedIndex !== null) {
            optionLabels[selectedIndex].classList.add("correct");
          }
        } else {
          if (q.correctIndex != null && optionLabels[q.correctIndex]) {
            optionLabels[q.correctIndex].classList.add("correct");
          }
          if (selectedIndex !== null && optionLabels[selectedIndex]) {
            optionLabels[selectedIndex].classList.add("incorrect");
          }
        }
      });

      const ratio = score / total;
      let message;

      if (ratio === 1) {
        message = "Parfait, tu ma√Ætrises totalement le sujet üëå";
      } else if (ratio >= 0.7) {
        message = "Tr√®s solide ! Il reste quelques d√©tails √† affiner.";
      } else if (ratio >= 0.4) {
        message = "Pas mal, mais relire l‚Äôarticle t‚Äôaidera √† consolider les bases.";
      } else {
        message = "C‚Äôest un bon d√©but, retourne sur l‚Äôarticle puis retente le quiz.";
      }

      quizResult.innerHTML = "<strong>" + score + "/" + total + "</strong> bonnes r√©ponses. " + message;

      if (window.acadGamification) {
        window.acadGamification.registerQuizResult(ARTICLE_ID, score, total);
      }
      if (ratio === 1) {
        quizFeedback.textContent = "üéÆ Bravo ! Quiz parfait, tu contribues au d√©blocage du badge Trail D√©butant.";
      } else {
        quizFeedback.textContent = "Tu peux recommencer le quiz si tu veux viser le 100 % pour le badge.";
      }
    }

    function resetQuiz() {
      renderQuiz();
    }

    submitBtn.addEventListener("click", evaluateQuiz);
    resetBtn.addEventListener("click", resetQuiz);

    const articleReadBtn = document.getElementById("mark-article-read");
    if (articleReadBtn) {
      articleReadBtn.addEventListener("click", function () {
        if (!window.acadGamification) return;
        window.acadGamification.markArticleRead(ARTICLE_ID, 20);
        articleReadBtn.textContent = "‚úì Article compt√© pour l‚ÄôXP locale";
        articleReadBtn.disabled = true;
      });

      if (window.acadGamification && window.acadGamification.isArticleRead(ARTICLE_ID)) {
        articleReadBtn.textContent = "‚úì Article d√©j√† compt√© pour l‚ÄôXP locale";
        articleReadBtn.disabled = true;
      }
    }

    const shareBtn = document.getElementById("share-article");
    const shareFeedback = document.getElementById("share-feedback");

    if (shareBtn) {
      shareBtn.addEventListener("click", async function () {
        if (window.acadGamification) {
          window.acadGamification.registerShare(ARTICLE_ID, 15);
        }

        const shareData = {
          title: "A-Cad√©mie ‚Äî Trail d√©butants : le mat√©riel essentiel",
          text: "Un guide simple + quiz pour s‚Äô√©quiper en trail sans se tromper.",
          url: window.location.href
        };

        if (navigator.share) {
          try {
            await navigator.share(shareData);
            if (shareFeedback) {
              shareFeedback.textContent = "Merci pour le partage ! (XP ajout√©e sur cet appareil)";
            }
          } catch (e) {
            if (shareFeedback) {
              shareFeedback.textContent = "Partage annul√©, mais tu peux r√©essayer quand tu veux.";
            }
          }
        } else {
          if (shareFeedback) {
            shareFeedback.textContent = "Le partage automatique n‚Äôest pas disponible sur cet appareil. Tu peux copier l‚Äôadresse dans la barre du navigateur. (XP ajout√©e)";
          }
        }
      });
    }

    renderQuiz();
  </script>
</body>
</html>
