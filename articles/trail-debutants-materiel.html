<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="utf-8" />
  <title>A-CadÃ©mie â€” Trail pour dÃ©butants : matÃ©riel indispensable</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />

  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="../css/acad-style.css">

  <!-- Firebase -->
  <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-app.js"></script>
  <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-auth.js"></script>
  <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-firestore.js"></script>
  <script src="../js/firebase-config.js"></script>
</head>

<body>
  <div class="page">

    <!-- HEADER -->
    <header class="acad-header">
      <a href="../index.html" class="brand" style="text-decoration:none;">
        <div class="brand-logo">A</div>
        <div>
          <div class="brand-text-title">A-CadÃ©mie</div>
          <div class="brand-text-sub">Endurance & Outdoor â€” Article + Quiz</div>
        </div>
      </a>

      <nav class="acad-nav">
        <a class="nav-btn" href="../index.html"><span class="dot"></span> Accueil</a>
        <a class="nav-btn primary" href="../articles.html">Articles</a>
        <a class="nav-btn" href="../recompenses.html">RÃ©compenses</a>
      </nav>

      <div id="acad-profile" class="profile-card">
        <div class="profile-main">
          <div class="profile-avatar">â›°ï¸</div>
          <div>
            <div class="profile-level">Niveau <span id="acad-level">1</span></div>
            <div class="profile-xp"><span id="acad-xp">0</span> XP locale</div>
          </div>
        </div>
        <div class="profile-progress-wrapper">
          <div class="profile-progress-bar">
            <div class="profile-progress-fill" id="acad-xp-bar"></div>
          </div>
          <div class="profile-progress-label">
            <span>Vers niveau <span id="acad-next-level">2</span></span>
            <span id="acad-xp-to-next">0 / 100</span>
          </div>
        </div>
      </div>
    </header>


    <!-- MAIN -->
    <main class="layout">

      <!-- ARTICLE -->
      <article class="article-card">

        <div class="article-meta">
          <span class="tag"><span class="tag-dot"></span> Endurance & Outdoor â€” Trail</span>
          <span class="chip">Lecture : 7â€“8 min</span>
          <span class="chip">Niveau : DÃ©butant</span>
        </div>

        <h1 class="article-title">Trail pour dÃ©butants : matÃ©riel indispensable</h1>
        <p class="article-subtitle">
          Tu veux quitter le bitume et tester les chemins ? Bonne idÃ©e.  
          Pas besoin dâ€™un Ã©quipement de pro, mais il y a quand mÃªme quelques **indispensables** pour rester en sÃ©curitÃ© et prendre du plaisir.
        </p>

        <div class="article-highlight">
          <strong>Ã€ retenir :</strong> le bon matÃ©riel de trail, ce nâ€™est pas â€œtout acheterâ€, câ€™est
          <strong>protÃ©ger tes pieds</strong>, <strong>gÃ©rer ton hydratation</strong> et <strong>rester en sÃ©curitÃ©</strong>.
        </div>

        <div class="article-content">

          <h2>1ï¸âƒ£ Chaussures de trail : la base</h2>
          <p>
            En trail, les chaussures sont lâ€™Ã©lÃ©ment le plus important.  
            Elles doivent :
          </p>
          <ul>
            <li>avoir une <strong>semelle avec crampons</strong> pour accrocher en montÃ©e/descente</li>
            <li>Ãªtre <strong>stables</strong> (bon maintien du pied et de la cheville)</li>
            <li>Ãªtre Ã  la <strong>bonne taille</strong> (souvent Â½ ou 1 pointure de plus que la ville)</li>
          </ul>
          <p>
            Pour dÃ©buter, un modÃ¨le de trail â€œpolyvalentâ€ suffit largement. Pas besoin de plaque carbone ni de modÃ¨le ultra minimaliste.
          </p>

          <h2>2ï¸âƒ£ Hydratation : ne pars pas les mains vides</h2>
          <p>
            MÃªme pour 45â€“60 minutes, surtout en nature, il vaut mieux pouvoir boire :
          </p>
          <ul>
            <li><strong>Ceinture porte-flasque</strong> (jusquâ€™Ã  ~500 ml)</li>
            <li><strong>Petit sac ou gilet de trail</strong> avec poches devant</li>
          </ul>
          <p>
            Choisis une solution oÃ¹ tu peux boire facilement sans tâ€™arrÃªter pendant 2 minutes pour chercher ta gourde au fond du sac.
          </p>

          <h2>3ï¸âƒ£ VÃªtements : confort et protection</h2>
          <p>RÃ¨gles simples :</p>
          <ul>
            <li><strong>Tee-shirt technique</strong> qui Ã©vacue la transpiration (Ã©viter le coton)</li>
            <li><strong>Short ou cuissard</strong> confortable, qui ne frotte pas</li>
            <li><strong>Chaussettes anti-ampoules</strong> (adaptÃ©es Ã  la course)</li>
            <li><strong>Couche coupe-vent / imper</strong> lÃ©gÃ¨re si mÃ©tÃ©o incertaine</li>
          </ul>
          <p>
            En montagne ou en temps incertain : mieux vaut avoir un peu trop que pas assez (froid, pluie, vent).
          </p>

          <h2>4ï¸âƒ£ SÃ©curitÃ© : on nâ€™est pas sur une boucle en ville</h2>
          <p>Les chemins, câ€™est top, mais il faut penser sÃ©curitÃ© :</p>
          <ul>
            <li>Prendre un <strong>tÃ©lÃ©phone chargÃ©</strong></li>
            <li><strong>PrÃ©venir quelquâ€™un</strong> de ton itinÃ©raire et de la durÃ©e prÃ©vue</li>
            <li>Emporter une <strong>piÃ¨ce dâ€™identitÃ©</strong> ou un petit mot avec un contact dâ€™urgence</li>
            <li>En terrain isolÃ© : un <strong>sifflet</strong> (souvent intÃ©grÃ© aux sacs de trail)</li>
          </ul>

          <h2>5ï¸âƒ£ Nourriture : Ã  partir de quand ?</h2>
          <p>
            Pour les sorties de moins dâ€™1h15â€“1h30, lâ€™hydratation suffit en gÃ©nÃ©ral (si ton dernier repas nâ€™est pas trop loin).  
            Au-delÃ  :
          </p>
          <ul>
            <li>1â€“2 <strong>gels</strong> ou une petite <strong>barre</strong> de type Ã©nergÃ©tique</li>
            <li>ou des <strong>fruits secs</strong> (dattes, raisins, etc.)</li>
          </ul>
          <p>
            Teste toujours en entraÃ®nement avant dâ€™utiliser un produit en course.
          </p>

          <h2>6ï¸âƒ£ MatÃ©riel â€œbonusâ€ utile</h2>
          <ul>
            <li><strong>Casquette / buff</strong> (soleil, froid, vent)</li>
            <li><strong>Lampe frontale</strong> si tu cours tÃ´t le matin ou le soir</li>
            <li><strong>BÃ¢tons</strong> (plutÃ´t pour le dÃ©nivelÃ© important, pas indispensables au dÃ©but)</li>
            <li><strong>Montre GPS</strong> : pratique, mais pas obligatoire pour commencer</li>
          </ul>

          <h2>7ï¸âƒ£ Ce que tu nâ€™es pas obligÃ© dâ€™acheter au dÃ©but</h2>
          <ul>
            <li>Les modÃ¨les â€œultra haut de gammeâ€ de chaussures</li>
            <li>Un sac 12L si tu fais de petites sorties</li>
            <li>Les bÃ¢tons carbone â€œcourseâ€ si tu fais du trail tranquille</li>
          </ul>
          <p>
            Commence avec le nÃ©cessaire, vois si tu aimes vraiment le trail, puis complÃ¨te au fur et Ã  mesure.
          </p>
        </div>

        <div class="article-footer-note">
          <span class="bullet-pill">ğŸ® Gamification locale</span>
          <span>Lecture, quiz et partage = XP gagnÃ©e sur cet appareil.</span>
        </div>

        <button type="button" class="btn btn-secondary" id="mark-article-read">
          âœ“ Jâ€™ai lu cet article (gagner de lâ€™XP)
        </button>

        <div style="margin-top:12px;">
          <button type="button" class="btn btn-primary" id="share-article">
            ğŸ”— Partager cet article / quiz
          </button>
          <div id="share-feedback" style="font-size:12px;color:var(--text-soft);margin-top:4px;"></div>
        </div>

      </article>


      <!-- QUIZ -->
      <section class="quiz-card" id="quiz-section">

        <div class="quiz-header">
          <div class="quiz-left">
            <div class="quiz-title">Quiz express : MatÃ©riel trail dÃ©butant</div>
            <div class="quiz-caption">5 questions pour vÃ©rifier que tu as les bons rÃ©flexes.</div>
          </div>
          <div class="quiz-badge">âš¡ 5 questions Â· 3 min</div>
        </div>

        <div class="quiz-progress" id="quiz-progress">Question 1 sur 5</div>
        <form id="quiz-form"></form>

        <div class="quiz-footer">
          <div class="quiz-actions">
            <button type="button" class="btn btn-primary" id="quiz-submit">
              Valider mes rÃ©ponses
            </button>
            <button type="button" class="btn btn-secondary" id="quiz-reset">
              Recommencer le quiz
            </button>
          </div>
          <div class="quiz-result" id="quiz-result">
            RÃ©ponds aux questions puis valide pour voir ton score.
          </div>
        </div>

        <div class="quiz-feedback" id="quiz-feedback"></div>
      </section>

    </main>
  </div>

  <!-- GAMIFICATION SCRIPTS -->
  <script src="../js/acad-gamification.js"></script>
  <script src="../js/acad-firebase-sync.js"></script>

  <script>
    const ARTICLE_ID = "trail-debutants-materiel";

    const quizData = [
      {
        id: 1,
        question: "Quel Ã©lÃ©ment est vraiment indispensable pour commencer le trail ?",
        options: [
          "Des bÃ¢tons carbone haut de gamme",
          "Des chaussures de trail avec semelle crantÃ©e",
          "Une montre GPS dernier cri",
          "Un sac de 12 litres minimum"
        ],
        correctIndex: 1
      },
      {
        id: 2,
        question: "Pourquoi lâ€™hydratation est importante mÃªme sur 45â€“60 minutes ?",
        options: [
          "Uniquement pour Ã©viter les crampes",
          "Parce quâ€™en trail on a toujours trÃ¨s chaud",
          "Pour limiter la fatigue et rester lucide",
          "Seulement en compÃ©tition"
        ],
        correctIndex: 2
      },
      {
        id: 3,
        question: "Quel Ã©lÃ©ment de sÃ©curitÃ© est recommandÃ© ?",
        options: [
          "PrÃ©venir quelquâ€™un de ton itinÃ©raire",
          "Partir sans tÃ©lÃ©phone pour Ãªtre â€œlibreâ€",
          "Ne rien prendre pour courir lÃ©ger",
          "Uniquement une montre GPS"
        ],
        correctIndex: 0
      },
      {
        id: 4,
        question: "Ã€ partir de quelle durÃ©e la nourriture devient utile en gÃ©nÃ©ral ?",
        options: [
          "DÃ¨s 10 minutes",
          "Toujours, mÃªme sur 30 minutes",
          "Ã€ partir dâ€™environ 1h15â€“1h30",
          "Jamais, lâ€™eau suffit toujours"
        ],
        correctIndex: 2
      },
      {
        id: 5,
        question: "Quel Ã©quipement nâ€™est PAS obligatoire pour dÃ©buter ?",
        options: [
          "Une paire de chaussures de trail",
          "Un moyen dâ€™emporter de lâ€™eau",
          "Un sifflet intÃ©grÃ© au sac",
          "Des bÃ¢tons haute performance"
        ],
        correctIndex: 3
      }
    ];

    const quizForm = document.getElementById("quiz-form");
    const quizProgress = document.getElementById("quiz-progress");
    const quizResult = document.getElementById("quiz-result");
    const quizFeedback = document.getElementById("quiz-feedback");
    const submitBtn = document.getElementById("quiz-submit");
    const resetBtn = document.getElementById("quiz-reset");

    function renderQuiz() {
      quizForm.innerHTML = "";
      quizData.forEach((q, index) => {
        const questionDiv = document.createElement("div");
        questionDiv.className = "quiz-question";
        questionDiv.dataset.questionId = q.id;

        questionDiv.innerHTML = `
          <div class="quiz-question-header">
            <div class="quiz-question-label">Q${index + 1}. ${q.question}</div>
            <div class="quiz-question-meta">1 seule bonne rÃ©ponse</div>
          </div>

          <div class="quiz-options">
            ${q.options
              .map(
                (opt, i) => `
                <label class="quiz-option">
                  <input type="radio" name="question-${q.id}" value="${i}">
                  <span>${opt}</span>
                </label>
              `
              )
              .join("")}
          </div>
        `;

        quizForm.appendChild(questionDiv);
      });

      quizProgress.textContent = "Question 1 sur " + quizData.length;
      quizResult.textContent = "RÃ©ponds aux questions puis valide pour voir ton score.";
      quizFeedback.textContent = "";
    }

    function updateProgress() {
      const answered = quizData.filter(q =>
        [...document.querySelectorAll(\`input[name="question-\${q.id}"]\`)]
          .some(r => r.checked)
      ).length;

      quizProgress.textContent = \`Question \${answered || 1} sur \${quizData.length}\`;
    }

    quizForm.addEventListener("change", updateProgress);

    function evaluateQuiz() {
      let score = 0;

      document.querySelectorAll(".quiz-option").forEach(opt =>
        opt.classList.remove("correct", "incorrect")
      );

      quizData.forEach(q => {
        const radios = document.querySelectorAll(\`input[name="question-\${q.id}"]\`);
        let selected = null;

        radios.forEach((r, i) => {
          if (r.checked) selected = i;
        });

        const block = document.querySelector(\`.quiz-question[data-question-id="\${q.id}"]\`);
        const options = block.querySelectorAll(".quiz-option");

        if (selected === q.correctIndex) {
          score++;
          options[selected]?.classList.add("correct");
        } else {
          options[q.correctIndex]?.classList.add("correct");
          if (selected !== null) options[selected]?.classList.add("incorrect");
        }
      });

      const total = quizData.length;
      const ratio = score / total;

      let msg =
        ratio === 1 ? "Parfait ! Tu as tout ce quâ€™il faut pour partir en sÃ©curitÃ© â›°ï¸" :
        ratio >= 0.7 ? "TrÃ¨s bon score, tu as bien compris lâ€™essentiel." :
        ratio >= 0.4 ? "Pas mal, mais relis certains points sur le matÃ©riel de base." :
        "Relis lâ€™article tranquillement puis retente le quiz.";

      quizResult.innerHTML = \`<strong>\${score}/\${total}</strong> bonnes rÃ©ponses â€¢ \${msg}\`;

      if (window.acadGamification)
        window.acadGamification.registerQuizResult(ARTICLE_ID, score, total);

      quizFeedback.textContent =
        ratio === 1 ? "ğŸ® Bravo ! XP bonus pour ce quiz parfait." :
        "Tu peux recommencer pour viser le 100 % et progresser dans les badges Trail.";
    }

    submitBtn.addEventListener("click", evaluateQuiz);
    resetBtn.addEventListener("click", renderQuiz);

    // Bouton "Jâ€™ai lu cet article"
    const readBtn = document.getElementById("mark-article-read");
    if (readBtn) {
      readBtn.addEventListener("click", () => {
        if (window.acadGamification)
          window.acadGamification.markArticleRead(ARTICLE_ID, 20);

        readBtn.textContent = "âœ“ Article comptÃ© pour lâ€™XP locale";
        readBtn.disabled = true;
      });
    }

    // Partage
    const shareBtn = document.getElementById("share-article");
    const shareFeedback = document.getElementById("share-feedback");

    if (shareBtn) {
      shareBtn.addEventListener("click", async () => {
        if (window.acadGamification)
          window.acadGamification.registerShare(ARTICLE_ID, 15);

        const data = {
          title: "A-CadÃ©mie â€” Trail pour dÃ©butants : matÃ©riel",
          text: "Les indispensables pour dÃ©buter le trail en sÃ©curitÃ© + quiz express.",
          url: window.location.href
        };

        if (navigator.share) {
          try {
            await navigator.share(data);
            shareFeedback.textContent = "Merci pour le partage ! (XP ajoutÃ©e)";
          } catch {
            shareFeedback.textContent = "Partage annulÃ©, tu peux rÃ©essayer plus tard.";
          }
        } else {
          shareFeedback.textContent = "Partage automatique indisponible. Tu peux copier le lien dans ton navigateur.";
        }
      });
    }

    // Init
    renderQuiz();
  </script>

</body>
</html>
