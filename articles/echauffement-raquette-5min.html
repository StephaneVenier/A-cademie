<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="utf-8" />
  <title>A-CadÃ©mie â€” Ã‰chauffement spÃ©cifique raquette (5 min)</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />

  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="../css/acad-style.css">

  <!-- Firebase -->
  <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-app.js"></script>
  <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-auth.js"></script>
  <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-firestore.js"></script>
  <script src="../js/firebase-config.js"></script>
</head>

<body>
<div class="page">

  <!-- HEADER -->
  <header class="acad-header">
    <a href="../index.html" class="brand" style="text-decoration:none;">
      <div class="brand-logo">A</div>
      <div>
        <div class="brand-text-title">A-CadÃ©mie</div>
        <div class="brand-text-sub">Rackets â€” Tennis & Padel Â· Article + Quiz</div>
      </div>
    </a>

    <nav class="acad-nav">
      <a class="nav-btn" href="../index.html"><span class="dot"></span> Accueil</a>
      <a class="nav-btn primary" href="../articles.html">Articles</a>
      <a class="nav-btn" href="../recompenses.html">RÃ©compenses</a>
    </nav>

    <div id="acad-profile" class="profile-card">
      <div class="profile-main">
        <div class="profile-avatar">ğŸ¾</div>
        <div>
          <div class="profile-level">Niveau <span id="acad-level">1</span></div>
          <div class="profile-xp"><span id="acad-xp">0</span> XP locale</div>
        </div>
      </div>
      <div class="profile-progress-wrapper">
        <div class="profile-progress-bar">
          <div class="profile-progress-fill" id="acad-xp-bar"></div>
        </div>
        <div class="profile-progress-label">
          <span>Vers niveau <span id="acad-next-level">2</span></span>
          <span id="acad-xp-to-next">0 / 100</span>
        </div>
      </div>
    </div>
  </header>

  <!-- MAIN -->
  <main class="layout">

    <!-- ARTICLE -->
    <article class="article-card">

      <div class="article-meta">
        <span class="tag"><span class="tag-dot"></span> Rackets â€” Tennis & Padel</span>
        <span class="chip">Lecture : 5â€“6 min</span>
        <span class="chip">Niveau : Tous niveaux</span>
      </div>

      <h1 class="article-title">Ã‰chauffement spÃ©cifique raquette (5 min)</h1>
      <p class="article-subtitle">
        5 minutes pour prÃ©parer Ã©paules, poignets, jambes et regard avant un match de tennis ou de padel.  
        Une routine simple, sans matÃ©riel, Ã  faire juste avant de rentrer sur le court.
      </p>

      <div class="article-highlight">
        <strong>Ã€ retenir :</strong> un bon Ã©chauffement = plus de sensations, moins de blessures, plus de plaisir dÃ¨s les premiers Ã©changes.
      </div>

      <div class="article-content">

        <h2>1ï¸âƒ£ Objectif de la routine</h2>
        <p>
          Cette routine de 5 minutes :
        </p>
        <ul>
          <li>rÃ©veille le cardio sans te fatiguer,</li>
          <li>mobilise les articulations clÃ©s (Ã©paules, coudes, poignets, hanches, genoux),</li>
          <li>prÃ©pare les gestes raquette : volÃ©es, services, smashs.</li>
        </ul>

        <h2>2ï¸âƒ£ La routine 5 minutes (sans balle)</h2>

        <h3>1) MobilitÃ© gÃ©nÃ©rale (1 min)</h3>
        <ul>
          <li>10 cercles de tÃªte lentement (droite/gauche)</li>
          <li>10 cercles dâ€™Ã©paules avant puis arriÃ¨re</li>
          <li>10 cercles de hanches + 10 flexions lÃ©gÃ¨res de genoux</li>
        </ul>

        <h3>2) Poignets & coudes (45 sec)</h3>
        <ul>
          <li>20 cercles de poignets (raquette en main si possible)</li>
          <li>10 flexions/extensions de coudes (comme un service ralenti)</li>
        </ul>

        <h3>3) Pas chassÃ©s & petits appuis (1 min)</h3>
        <ul>
          <li>2 Ã— 20 sec de pas chassÃ©s droite/gauche</li>
          <li>20 sec de petits appuis sur place (rebonds lÃ©gers sur lâ€™avant du pied)</li>
        </ul>

        <h3>4) Gestes raquette Ã  vide (1 min 30)</h3>
        <ul>
          <li>10 frappes coup droit â€œÃ  videâ€ (amplitude contrÃ´lÃ©e)</li>
          <li>10 revers</li>
          <li>6â€“8 gestes de volÃ©e (coup droit/revers) prÃ¨s du filet imaginaire</li>
          <li>4â€“6 mouvements de service ou bandeja (sans forcer)</li>
        </ul>

        <h3>5) Fin de routine : rÃ©veil du regard (45 sec)</h3>
        <p>
          Demande Ã  un partenaire de faire rebondir une balle devant toi â†’  
          tu suis la balle du regard sans bouger la tÃªte, en restant dynamique sur les appuis.
        </p>

        <h2>3ï¸âƒ£ Adaptations tennis / padel</h2>

        <h3>Version tennis</h3>
        <ul>
          <li>ajoute 3â€“4 services trÃ¨s lÃ©gers (50â€“60 % de puissance)</li>
          <li>fais 2â€“3 dÃ©placements avant/arriÃ¨re faÃ§on montÃ©e/descente au filet</li>
        </ul>

        <h3>Version padel</h3>
        <ul>
          <li>travaille 3â€“4 â€œbandejasâ€ Ã  vide (sans chercher la puissance)</li>
          <li>simule une sortie de vitre (pas chassÃ© + rotation du buste)</li>
        </ul>

        <h2>4ï¸âƒ£ Erreurs frÃ©quentes Ã  Ã©viter</h2>
        <ul>
          <li>arriver 2 minutes avant le match et taper directement fort,</li>
          <li>ne jamais mobiliser Ã©paules/poignets,</li>
          <li>confondre Ã©chauffement et sÃ©ance dâ€™intensitÃ©.</li>
        </ul>

        <p>
          âœ Tu dois finir <strong>chaud</strong>, pas dÃ©jÃ  cramÃ©.  
          Si tu transpires lÃ©gÃ¨rement, que tes appuis sont rÃ©actifs et que tes gestes sont fluides, tu es prÃªt(e).
        </p>

      </div>

      <div class="article-footer-note">
        <span class="bullet-pill">ğŸ® Gamification locale</span>
        <span>Lecture, quiz et partage = XP gagnÃ©e sur cet appareil.</span>
      </div>

      <button type="button" class="btn btn-secondary" id="mark-article-read">
        âœ“ Jâ€™ai lu cet article (gagner de lâ€™XP)
      </button>

      <div style="margin-top:12px;">
        <button type="button" class="btn btn-primary" id="share-article">
          ğŸ”— Partager cet article / quiz
        </button>
        <div id="share-feedback" style="font-size:12px;color:var(--text-soft);margin-top:4px;"></div>
      </div>

    </article>


    <!-- QUIZ -->
    <section class="quiz-card" id="quiz-section">

      <div class="quiz-header">
        <div class="quiz-left">
          <div class="quiz-title">Quiz express : Ã‰chauffement raquette</div>
          <div class="quiz-caption">5 questions pour vÃ©rifier que tu as compris la routine.</div>
        </div>
        <div class="quiz-badge">âš¡ 5 questions Â· 3 min</div>
      </div>

      <div class="quiz-progress" id="quiz-progress">Question 1 sur 5</div>
      <form id="quiz-form"></form>

      <div class="quiz-footer">
        <div class="quiz-actions">
          <button type="button" class="btn btn-primary" id="quiz-submit">
            Valider mes rÃ©ponses
          </button>
          <button type="button" class="btn btn-secondary" id="quiz-reset">
            Recommencer le quiz
          </button>
        </div>
        <div class="quiz-result" id="quiz-result">
          RÃ©ponds aux questions puis valide pour voir ton score.
        </div>
      </div>

      <div class="quiz-feedback" id="quiz-feedback"></div>
    </section>

  </main>
</div>

<!-- GAMIFICATION SCRIPTS -->
<script src="../js/acad-gamification.js"></script>
<script src="../js/acad-firebase-sync.js"></script>

<script>
  const ARTICLE_ID = "echauffement-raquette-5min";

  const quizData = [
    {
      id: 1,
      question: "Combien de temps dure la routine proposÃ©e ?",
      options: ["2 minutes", "5 minutes", "10 minutes", "20 minutes"],
      correctIndex: 1
    },
    {
      id: 2,
      question: "Quel est le but de lâ€™Ã©chauffement ?",
      options: [
        "Se fatiguer le plus possible",
        "PrÃ©parer le corps et rÃ©duire le risque de blessure",
        "Tester la puissance maximale",
        "Remplacer lâ€™entraÃ®nement"
      ],
      correctIndex: 1
    },
    {
      id: 3,
      question: "Quel type de gestes est conseillÃ© pendant lâ€™Ã©chauffement ?",
      options: [
        "Gestes courts et contrÃ´lÃ©s",
        "Gestes explosifs Ã  100 %",
        "Uniquement du gainage",
        "Aucun geste raquette"
      ],
      correctIndex: 0
    },
    {
      id: 4,
      question: "Que travaille la partie â€œgestes raquette Ã  videâ€ ?",
      options: [
        "Les frappes puissantes uniquement",
        "La coordination et la fluiditÃ© des mouvements",
        "Uniquement les jambes",
        "Le service Ã  pleine puissance"
      ],
      correctIndex: 1
    },
    {
      id: 5,
      question: "Ã€ la fin de lâ€™Ã©chauffement, tu dois te sentir :",
      options: [
        "ComplÃ¨tement cramÃ©",
        "Encore froid",
        "LÃ©gÃ¨rement chaud, rÃ©actif sur les appuis",
        "EssoufflÃ© comme aprÃ¨s un match"
      ],
      correctIndex: 2
    }
  ];

  const quizForm = document.getElementById("quiz-form");
  const quizProgress = document.getElementById("quiz-progress");
  const quizResult = document.getElementById("quiz-result");
  const quizFeedback = document.getElementById("quiz-feedback");
  const submitBtn = document.getElementById("quiz-submit");
  const resetBtn = document.getElementById("quiz-reset");

  function renderQuiz() {
    quizForm.innerHTML = "";
    quizData.forEach((q, index) => {
      const div = document.createElement("div");
      div.className = "quiz-question";
      div.dataset.questionId = q.id;

      div.innerHTML = `
        <div class="quiz-question-header">
          <div class="quiz-question-label">Q${index + 1}. ${q.question}</div>
          <div class="quiz-question-meta">1 seule bonne rÃ©ponse</div>
        </div>
        <div class="quiz-options">
          ${q.options.map((opt, i) => `
            <label class="quiz-option">
              <input type="radio" name="question-${q.id}" value="${i}">
              <span>${opt}</span>
            </label>
          `).join("")}
        </div>
      `;

      quizForm.appendChild(div);
    });

    quizProgress.textContent = "Question 1 sur " + quizData.length;
    quizResult.textContent = "RÃ©ponds aux questions puis valide pour voir ton score.";
    quizFeedback.textContent = "";
  }

  function updateProgress() {
    const answered = quizData.filter(q =>
      [...document.querySelectorAll(\`input[name="question-\${q.id}"]\`)]
        .some(r => r.checked)
    ).length;

    quizProgress.textContent = \`Question \${answered || 1} sur \${quizData.length}\`;
  }

  quizForm.addEventListener("change", updateProgress);

  function evaluateQuiz() {
    let score = 0;

    document.querySelectorAll(".quiz-option").forEach(opt =>
      opt.classList.remove("correct", "incorrect")
    );

    quizData.forEach(q => {
      const radios = document.querySelectorAll(\`input[name="question-\${q.id}"]\`);
      let selected = null;
      radios.forEach((r, i) => { if (r.checked) selected = i; });

      const block = document.querySelector(\`.quiz-question[data-question-id="\${q.id}"]\`);
      const opts = block.querySelectorAll(".quiz-option");

      if (selected === q.correctIndex) {
        score++;
        opts[selected]?.classList.add("correct");
      } else {
        opts[q.correctIndex]?.classList.add("correct");
        if (selected !== null) opts[selected]?.classList.add("incorrect");
      }
    });

    const total = quizData.length;
    const ratio = score / total;

    let msg =
      ratio === 1 ? "Parfait, tu sais te chauffer efficacement avant de jouer ğŸ¾" :
      ratio >= 0.7 ? "TrÃ¨s bon score, tu as bien compris la routine." :
      ratio >= 0.4 ? "Pas mal, mais relis lâ€™article pour optimiser." :
      "Relis lâ€™article tranquillement puis retente le quiz.";

    quizResult.innerHTML = \`<strong>\${score}/\${total}</strong> bonnes rÃ©ponses â€¢ \${msg}\`;

    if (window.acadGamification)
      window.acadGamification.registerQuizResult(ARTICLE_ID, score, total);

    quizFeedback.textContent =
      ratio === 1 ? "ğŸ® Bravo ! XP bonus ajoutÃ©e." : "Tu peux viser le perfect !";
  }

  submitBtn.addEventListener("click", evaluateQuiz);
  resetBtn.addEventListener("click", renderQuiz);

  const readBtn = document.getElementById("mark-article-read");
  if (readBtn) {
    readBtn.addEventListener("click", () => {
      if (window.acadGamification)
        window.acadGamification.markArticleRead(ARTICLE_ID, 20);

      readBtn.textContent = "âœ“ Article comptÃ© pour lâ€™XP locale";
      readBtn.disabled = true;
    });
  }

  const shareBtn = document.getElementById("share-article");
  const shareFeedback = document.getElementById("share-feedback");

  if (shareBtn) {
    shareBtn.addEventListener("click", async () => {
      if (window.acadGamification)
        window.acadGamification.registerShare(ARTICLE_ID, 15);

      const data = {
        title: "A-CadÃ©mie â€” Ã‰chauffement raquette (5 min)",
        text: "Routine rapide tennis/padel + quiz express.",
        url: window.location.href
      };

      if (navigator.share) {
        try {
          await navigator.share(data);
          shareFeedback.textContent = "Merci pour le partage ! (XP ajoutÃ©e)";
        } catch {
          shareFeedback.textContent = "Partage annulÃ©.";
        }
      } else {
        shareFeedback.textContent = "Le partage automatique nâ€™est pas disponible.";
      }
    });
  }

  renderQuiz();
</script>

</body>
</html>
