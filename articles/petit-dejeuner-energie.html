<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="utf-8" />
  <title>A-CadÃ©mie â€” Le petit dÃ©jeuner idÃ©al pour avoir de lâ€™Ã©nergie</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="../css/acad-style.css">
  <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-app.js"></script>
  <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-auth.js"></script>
  <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-firestore.js"></script>
  <script src="../js/firebase-config.js"></script>
</head>
<body>
  <div class="page">
    <header class="acad-header">
      <a href="../index.html" class="brand" style="text-decoration:none;">
        <div class="brand-logo">A</div>
        <div>
          <div class="brand-text-title">A-CadÃ©mie</div>
          <div class="brand-text-sub">Articles & quiz bien-Ãªtre en libre accÃ¨s</div>
        </div>
      </a>

      <nav class="acad-nav">
        <a class="nav-btn" href="../index.html"><span class="dot"></span> Accueil</a>
        <a class="nav-btn primary" href="../articles.html">Articles</a>
        <a class="nav-btn" href="../recompenses.html">RÃ©compenses</a>
      </nav>

      <div id="acad-profile" class="profile-card">
        <div class="profile-main">
          <div class="profile-avatar">ğŸ</div>
          <div>
            <div class="profile-level">Niveau <span id="acad-level">1</span></div>
            <div class="profile-xp"><span id="acad-xp">0</span> XP locale</div>
          </div>
        </div>
        <div class="profile-progress-wrapper">
          <div class="profile-progress-bar">
            <div class="profile-progress-fill" id="acad-xp-bar"></div>
          </div>
          <div class="profile-progress-label">
            <span>Vers niveau <span id="acad-next-level">2</span></span>
            <span id="acad-xp-to-next">0 / 100</span>
          </div>
        </div>
      </div>
    </header>

    <main class="layout">
      <article class="article-card">
        <div class="article-meta">
          <span class="tag"><span class="tag-dot"></span> HygiÃ¨ne de vie & Nutrition</span>
          <span class="chip">Lecture : 6 min</span>
          <span class="chip">Niveau : DÃ©butant</span>
        </div>

        <h1 class="article-title">Le petit dÃ©jeuner idÃ©al pour avoir de lâ€™Ã©nergie</h1>
        <p class="article-subtitle">
          Faut-il absolument manger le matin ? Que mettre dans son assiette pour Ã©viter le coup de barre de 10h ?
          Voici une approche simple pour construire un petit dÃ©jeuner qui donne vraiment de lâ€™Ã©nergie, sans prise de tÃªte.
        </p>

        <div class="article-highlight">
          <strong>Ã€ retenir :</strong> un bon petit dÃ©jeuner nâ€™est pas forcÃ©ment â€œgrosâ€, mais il doit Ãªtre
          <strong>Ã©quilibrÃ©</strong> : protÃ©ines, glucides de qualitÃ©, bonnes graisses et hydratation.
        </div>

        <div class="article-content">
          <h2>1. Faut-il forcÃ©ment prendre un petit dÃ©jeuner ?</h2>
          <p>
            Non. Certaines personnes ont faim le matin, dâ€™autres pas du tout. Ce qui compte :
          </p>
          <ul>
            <li>Si tu as faim : <strong>mange</strong> un vrai petit dÃ©jeuner, pas juste un cafÃ© sucrÃ©.</li>
            <li>Si tu nâ€™as pas faim : inutile de te forcer, mais Ã©vite le combo â€œrien le matin + craquage Ã  11hâ€.</li>
          </ul>

          <h2>2. Les 4 piliers dâ€™un petit dÃ©jeuner Ã©nergie</h2>
          <p>Pour tenir la matinÃ©e sans coups de barre, vise :</p>
          <ul>
            <li><strong>ProtÃ©ines</strong> : yaourt, fromage blanc, Å“ufs, skyr, tofu soyeuxâ€¦</li>
            <li><strong>Glucides complexes</strong> : flocons dâ€™avoine, pain complet, muesli peu sucrÃ©, fruits entiers.</li>
            <li><strong>Bonnes graisses</strong> : olÃ©agineux (amandes, noix), purÃ©e de cacahuÃ¨te/ amande, graines.</li>
            <li><strong>Hydratation</strong> : eau, thÃ©, infusion, cafÃ© non sucrÃ© ou peu sucrÃ©.</li>
          </ul>

          <h2>3. Trois exemples de petits dÃ©jeuners Ã©quilibrÃ©s</h2>
          <ul>
            <li>
              <strong>Version rapide</strong> : yaourt nature + banane tranchÃ©e + poignÃ©e dâ€™amandes + eau / thÃ©.<br>
              âœ 2 minutes, pas besoin de cuisiner.
            </li>
            <li>
              <strong>Version â€œbolâ€</strong> : flocons dâ€™avoine + lait (ou boisson vÃ©gÃ©tale) + fruits rouges surgelÃ©s + graines de chia.<br>
              âœ Fibres, glucides lents, protÃ©ines et bonnes graisses.
            </li>
            <li>
              <strong>Version salÃ©e</strong> : 1 ou 2 Å“ufs + tartine de pain complet + tomate / avocat + thÃ© ou cafÃ©.<br>
              âœ TrÃ¨s bon pour la satiÃ©tÃ© et lâ€™Ã©nergie stable.
            </li>
          </ul>

          <h2>4. Les erreurs qui plombent lâ€™Ã©nergie</h2>
          <ul>
            <li><strong>Petit dÃ©jeuner 100 % sucrÃ©</strong> (viennoiseries + jus) : pic de sucre âœ chute rapide âœ coup de barre.</li>
            <li><strong>Jus de fruits Ã  la place du fruit</strong> : beaucoup de sucre, peu de fibres.</li>
            <li><strong>Trop de cafÃ©, pas assez dâ€™eau</strong> : tu te sens â€œrÃ©veillÃ©â€, mais pas forcÃ©ment hydratÃ©.</li>
          </ul>

          <h2>5. Et si je nâ€™ai pas faim le matin ?</h2>
          <p>
            Câ€™est possible dâ€™Ãªtre en forme sans petit dÃ©jeuner, mais dans ce cas :
          </p>
          <ul>
            <li>Prends au moins un <strong>verre dâ€™eau</strong> ou une boisson chaude non sucrÃ©e.</li>
            <li>PrÃ©vois un <strong>snack Ã©quilibrÃ©</strong> vers 10h : fruit + poignÃ©e dâ€™olÃ©agineux, par exemple.</li>
            <li>Observe si tu tiens bien jusquâ€™au dÃ©jeuner sans grosse fringale.</li>
          </ul>

          <h2>6. Adapter en fonction de ta matinÃ©e</h2>
          <ul>
            <li><strong>MatinÃ©e calme / assise</strong> : un petit dÃ©jeuner lÃ©ger suffit.</li>
            <li><strong>MatinÃ©e sportive</strong> (entraÃ®nement, dÃ©placementâ€¦) : ajoute un peu plus de glucides (fruit + pain complet).</li>
          </ul>
        </div>

        <div class="article-footer-note">
          <span class="bullet-pill">ğŸ® Gamification locale</span>
          <span>Lecture, quiz et partage de cet article te donnent de lâ€™XP sur cet appareil.</span>
        </div>

        <button type="button" class="btn btn-secondary" id="mark-article-read">
          âœ“ Jâ€™ai lu cet article (gagner de lâ€™XP)
        </button>

        <div style="margin-top:12px;">
          <button type="button" class="btn btn-primary" id="share-article">
            ğŸ”— Partager cet article / quiz
          </button>
          <div id="share-feedback" style="font-size:12px;color:var(--text-soft);margin-top:4px;"></div>
        </div>
      </article>

      <!-- QUIZ -->
      <section class="quiz-card" id="quiz-section">
        <div class="quiz-header">
          <div class="quiz-left">
            <div class="quiz-title">Quiz express : Petit dÃ©jeuner Ã©nergie</div>
            <div class="quiz-caption">
              5 questions pour vÃ©rifier si tu as bien les bases dâ€™un matin plein dâ€™Ã©nergie.
            </div>
          </div>
          <div class="quiz-badge">âš¡ 5 questions Â· 3 min</div>
        </div>

        <div class="quiz-progress" id="quiz-progress">
          Question 1 sur 5
        </div>

        <form id="quiz-form"></form>

        <div class="quiz-footer">
          <div class="quiz-actions">
            <button type="button" class="btn btn-primary" id="quiz-submit">
              Valider mes rÃ©ponses
            </button>
            <button type="button" class="btn btn-secondary" id="quiz-reset">
              Recommencer le quiz
            </button>
          </div>
          <div class="quiz-result" id="quiz-result">
            RÃ©ponds aux questions puis valide pour voir ton score.
          </div>
        </div>

        <div class="quiz-feedback" id="quiz-feedback"></div>
      </section>
    </main>
  </div>

  <script src="../js/acad-gamification.js"></script>
  <script src="../js/acad-firebase-sync.js"></script>
  <script>
    const ARTICLE_ID = "petit-dejeuner-energie";

    const quizData = [
      {
        id: 1,
        question: "Quel est le rÃ´le principal dâ€™un petit dÃ©jeuner Ã©quilibrÃ© ?",
        options: [
          "Faire un repas trÃ¨s lourd pour ne plus manger de la journÃ©e",
          "Donner une Ã©nergie stable jusquâ€™Ã  la fin de la matinÃ©e",
          "Apporter le maximum de sucre rapidement",
          "Permettre de boire beaucoup de cafÃ©"
        ],
        correctIndex: 1
      },
      {
        id: 2,
        question: "Quel combo reprÃ©sente le mieux un petit dÃ©jeuner Ã©nergie ?",
        options: [
          "Viennoiserie + jus de fruits",
          "CafÃ© sucrÃ© uniquement",
          "ProtÃ©ines + glucides complexes + bonnes graisses + boisson",
          "Boisson Ã©nergisante + biscuit"
        ],
        correctIndex: 2
      },
      {
        id: 3,
        question: "Quel est le meilleur choix pour un fruit le matin ?",
        options: [
          "Un jus industriel filtrÃ©",
          "Un fruit entier",
          "Un sirop diluÃ© dans de lâ€™eau",
          "Aucun, les fruits fatiguent"
        ],
        correctIndex: 1
      },
      {
        id: 4,
        question: "Que faire si tu nâ€™as pas faim au rÃ©veil ?",
        options: [
          "Te forcer Ã  manger un gros repas",
          "Ne rien boire et attendre le dÃ©jeuner",
          "Boire au moins quelque chose et prÃ©voir un snack Ã©quilibrÃ© plus tard",
          "Prendre seulement un cafÃ© trÃ¨s sucrÃ©"
        ],
        correctIndex: 2
      },
      {
        id: 5,
        question: "Pour une matinÃ©e sportive, que peux-tu faire ?",
        options: [
          "Ne rien manger pour â€œbrÃ»ler plus de graissesâ€",
          "Ajouter un peu plus de glucides de qualitÃ© (fruit, pain complet)",
          "Ne prendre que des boissons sucrÃ©es",
          "Doubler les viennoiseries"
        ],
        correctIndex: 1
      }
    ];

    const quizForm = document.getElementById("quiz-form");
    const quizProgress = document.getElementById("quiz-progress");
    const quizResult = document.getElementById("quiz-result");
    const quizFeedback = document.getElementById("quiz-feedback");
    const submitBtn = document.getElementById("quiz-submit");
    const resetBtn = document.getElementById("quiz-reset");

    function renderQuiz() {
      quizForm.innerHTML = "";
      quizData.forEach((q, index) => {
        const questionDiv = document.createElement("div");
        questionDiv.className = "quiz-question";
        questionDiv.dataset.questionId = q.id;

        questionDiv.innerHTML = `
          <div class="quiz-question-header">
            <div class="quiz-question-label">Q${index + 1}. ${q.question}</div>
            <div class="quiz-question-meta">1 seule bonne rÃ©ponse</div>
          </div>
          <div class="quiz-options">
            ${q.options
              .map(
                (opt, i) => `
              <label class="quiz-option">
                <input type="radio" name="question-${q.id}" value="${i}">
                <span>${opt}</span>
              </label>
            `
              )
              .join("")}
          </div>
        `;
        quizForm.appendChild(questionDiv);
      });

      quizProgress.textContent = "Question 1 sur " + quizData.length;
      quizResult.innerHTML = "RÃ©ponds aux questions puis valide pour voir ton score.";
      quizFeedback.textContent = "";
    }

    function updateProgress() {
      const total = quizData.length;
      let answered = 0;

      quizData.forEach((q) => {
        const radios = document.querySelectorAll('input[name="question-' + q.id + '"]');
        const hasAnswer = Array.from(radios).some((r) => r.checked);
        if (hasAnswer) answered++;
      });

      quizProgress.textContent = "Question " + (answered === 0 ? 1 : answered) + " sur " + total;
    }

    quizForm.addEventListener("change", updateProgress);

    function evaluateQuiz() {
      let score = 0;
      const total = quizData.length;

      document.querySelectorAll(".quiz-option").forEach((opt) => {
        opt.classList.remove("correct", "incorrect");
      });

      quizData.forEach((q) => {
        const radios = document.querySelectorAll('input[name="question-' + q.id + '"]');
        let selectedIndex = null;

        radios.forEach((r, idx) => {
          if (r.checked) selectedIndex = idx;
        });

        const questionDiv = document.querySelector('.quiz-question[data-question-id="' + q.id + '"]');
        const optionLabels = questionDiv.querySelectorAll(".quiz-option");

        if (selectedIndex === q.correctIndex) {
          score++;
          if (selectedIndex !== null) {
            optionLabels[selectedIndex].classList.add("correct");
          }
        } else {
          if (q.correctIndex != null && optionLabels[q.correctIndex]) {
            optionLabels[q.correctIndex].classList.add("correct");
          }
          if (selectedIndex !== null && optionLabels[selectedIndex]) {
            optionLabels[selectedIndex].classList.add("incorrect");
          }
        }
      });

      const ratio = score / total;
      let message;

      if (ratio === 1) {
        message = "Excellent ! Tu as bien compris comment construire un petit dÃ©jeuner Ã©nergie ğŸ”‹";
      } else if (ratio >= 0.7) {
        message = "TrÃ¨s bon score, quelques dÃ©tails Ã  affiner.";
      } else if (ratio >= 0.4) {
        message = "Pas mal : relis lâ€™article tranquillement et retente le quiz.";
      } else {
        message = "Câ€™est un bon dÃ©but : lâ€™article est lÃ  pour tâ€™aider Ã  progresser pas Ã  pas.";
      }

      quizResult.innerHTML = "<strong>" + score + "/" + total + "</strong> bonnes rÃ©ponses. " + message;

      if (window.acadGamification) {
        window.acadGamification.registerQuizResult(ARTICLE_ID, score, total);
      }

      if (ratio === 1) {
        quizFeedback.textContent = "ğŸ® Bravo ! Quiz parfait, tu contribues au badge Nutrition & Ã©nergie.";
      } else {
        quizFeedback.textContent = "Tu peux recommencer le quiz pour viser le 100 % si tu veux.";
      }
    }

    function resetQuiz() {
      renderQuiz();
    }

    submitBtn.addEventListener("click", evaluateQuiz);
    resetBtn.addEventListener("click", resetQuiz);

    const readBtn = document.getElementById("mark-article-read");
    if (readBtn) {
      readBtn.addEventListener("click", () => {
        if (window.acadGamification) {
          window.acadGamification.markArticleRead(ARTICLE_ID, 20);
        }
        readBtn.textContent = "âœ“ Article comptÃ© pour lâ€™XP locale";
        readBtn.disabled = true;
      });
    }

    const shareBtn = document.getElementById("share-article");
    const shareFeedback = document.getElementById("share-feedback");

    if (shareBtn) {
      shareBtn.addEventListener("click", async () => {
        if (window.acadGamification) {
          window.acadGamification.registerShare(ARTICLE_ID, 15);
        }

        const shareData = {
          title: "A-CadÃ©mie â€” Le petit dÃ©jeuner idÃ©al pour avoir de lâ€™Ã©nergie",
          text: "DÃ©couvre comment construire un petit dÃ©jeuner qui tient vraiment au corps + un quiz express !",
          url: window.location.href
        };

        if (navigator.share) {
          try {
            await navigator.share(shareData);
            if (shareFeedback) {
              shareFeedback.textContent = "Merci pour le partage ! (XP ajoutÃ©e sur cet appareil)";
            }
          } catch (e) {
            if (shareFeedback) {
              shareFeedback.textContent = "Partage annulÃ©, tu pourras rÃ©essayer plus tard ğŸ™‚";
            }
          }
        } else {
          if (shareFeedback) {
            shareFeedback.textContent =
              "Le partage automatique nâ€™est pas disponible, mais tu peux copier lâ€™adresse dans la barre du navigateur. (XP ajoutÃ©e)";
          }
        }
      });
    }

    renderQuiz();
  </script>
</body>
</html>
