<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="utf-8" />
  <title>A-Cad√©mie ‚Äî Hyrox : la nouvelle comp√©tition expliqu√©e</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />

  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="../css/acad-style.css">

  <!-- Firebase -->
  <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-app.js"></script>
  <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-auth.js"></script>
  <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-firestore.js"></script>
  <script src="../js/firebase-config.js"></script>
</head>

<body>
<div class="page">

  <!-- HEADER -->
  <header class="acad-header">
    <a href="../index.html" class="brand">
      <div class="brand-logo">A</div>
      <div>
        <div class="brand-text-title">A-Cad√©mie</div>
        <div class="brand-text-sub">Hyrox / Functional ¬∑ Article + Quiz</div>
      </div>
    </a>

    <nav class="acad-nav">
      <a href="../index.html" class="nav-btn"><span class="dot"></span> Accueil</a>
      <a href="../articles.html" class="nav-btn primary">Articles</a>
      <a href="../recompenses.html" class="nav-btn">R√©compenses</a>
    </nav>

    <div id="acad-profile" class="profile-card">
      <div class="profile-main">
        <div class="profile-avatar">üèÅ</div>
        <div>
          <div class="profile-level">Niveau <span id="acad-level">1</span></div>
          <div class="profile-xp"><span id="acad-xp">0</span> XP locale</div>
        </div>
      </div>
      <div class="profile-progress-wrapper">
        <div class="profile-progress-bar">
          <div class="profile-progress-fill" id="acad-xp-bar"></div>
        </div>
        <div class="profile-progress-label">
          <span>Vers niveau <span id="acad-next-level">2</span></span>
          <span id="acad-xp-to-next">0 / 100</span>
        </div>
      </div>
    </div>
  </header>

  <!-- MAIN -->
  <main class="layout">

    <!-- ARTICLE -->
    <article class="article-card">

      <div class="article-meta">
        <span class="tag"><span class="tag-dot"></span> Hyrox</span>
        <span class="chip">Lecture : 7 min</span>
        <span class="chip">Niveau : Tous niveaux</span>
      </div>

      <h1 class="article-title">Hyrox : la nouvelle comp√©tition expliqu√©e</h1>
      <p class="article-subtitle">
        Course √† pied + renforcement + efforts r√©p√©t√©s : Hyrox est devenu l‚Äôun des formats les plus explosifs et accessibles du moment.  
        Voici un guide clair pour comprendre ce qui t‚Äôattend.
      </p>

      <div class="article-highlight">
        <strong>√Ä retenir :</strong> Hyrox m√©lange course + stations fonctionnelles, avec un format solide et identique partout dans le monde.
      </div>

      <div class="article-content">

        <h2>1Ô∏è‚É£ Hyrox, c‚Äôest quoi exactement ?</h2>
        <p>
          Hyrox est une comp√©tition internationale m√™lant <strong>course √† pied</strong> et <strong>exercices fonctionnels</strong>.
        </p>

        <h3>Le format officiel :</h3>
        <ul>
          <li>8 √ó 1 km de course</li>
          <li>Entre chaque km ‚Üí 1 station d‚Äôeffort</li>
        </ul>

        <h3>Les 8 stations :</h3>
        <ol>
          <li>1000 m SkiErg</li>
          <li>Tra√Æneau push</li>
          <li>Tra√Æneau pull</li>
          <li>Burpee broad jumps</li>
          <li>1 km Rowing</li>
          <li>Farmers carry</li>
          <li>Sandbag lunges</li>
          <li>Wall Balls</li>
        </ol>

        <h2>2Ô∏è‚É£ Pour qui est Hyrox ?</h2>
        <ul>
          <li>coureurs qui veulent ajouter de la force,</li>
          <li>pratiquants de salle souhaitant un objectif clair,</li>
          <li>amateurs de CrossFit cherchant un format plus stable,</li>
          <li>d√©butants motiv√©s par un d√©fi structur√©.</li>
        </ul>

        <p>Hyrox n‚Äôest pas r√©serv√© aux ‚Äúmonstres‚Äù. Le format est <strong>scalable</strong> (poids diff√©rents selon les cat√©gories).</p>

        <h2>3Ô∏è‚É£ Cat√©gories disponibles</h2>
        <ul>
          <li><strong>Open</strong> : charges standard.</li>
          <li><strong>Pro</strong> : charges plus lourdes.</li>
          <li><strong>Double</strong> : en duo (on partage les stations, pas la course).</li>
          <li><strong>Relais</strong> : 4 personnes (chacun fait 2 km + 2 stations).</li>
        </ul>

        <h2>4Ô∏è‚É£ Les qualit√©s physiques n√©cessaires</h2>
        <ul>
          <li><strong>Endurance a√©robie</strong> (beaucoup de course),</li>
          <li><strong>Force fonctionnelle</strong> (tirer, pousser, porter),</li>
          <li><strong>Puissance</strong> (burpees, wall balls),</li>
          <li><strong>R√©cup√©ration rapide</strong> entre stations.</li>
        </ul>

        <h2>5Ô∏è‚É£ Temps moyens en comp√©tition</h2>
        <ul>
          <li>D√©butant : 1h20 ‚Äì 1h40</li>
          <li>Interm√©diaire : 1h05 ‚Äì 1h20</li>
          <li>Avanc√© : 55 ‚Äì 65 minutes</li>
        </ul>

        <h2>6Ô∏è‚É£ Comment s‚Äôentra√Æner pour Hyrox ?</h2>
        <p>Un bon plan contient :</p>
        <ul>
          <li>course r√©guli√®re (EF + tempo),</li>
          <li>s√©ances ‚Äústations‚Äù (tra√Æneau, lunges, burpees‚Ä¶),</li>
          <li>s√©ances mixtes course + exercices,</li>
          <li>une s√©ance renfo / semaine.</li>
        </ul>

        <p>
          ‚ûú Le plus important : apprendre √† g√©rer sa course <strong>malgr√© la fatigue des stations</strong>.
        </p>

        <h2>7Ô∏è‚É£ Pourquoi Hyrox cartonne autant ?</h2>
        <ul>
          <li>format identique dans le monde entier,</li>
          <li>chronom√©tr√© avec classement officiel,</li>
          <li>accessibilit√© pour tous les niveaux,</li>
          <li>ambiance √©norme en comp√©tition.</li>
        </ul>

        <p>
          Si tu aimes les d√©fis physiques complets et r√©guliers ‚Üí Hyrox est l‚Äôun des meilleurs formats du moment.
        </p>

      </div>

      <!-- FOOTER GAMIF -->
      <div class="article-footer-note">
        <span class="bullet-pill">üéÆ Gamification locale</span>
        <span>Lecture, quiz et partage = XP gagn√©e sur cet appareil.</span>
      </div>

      <button class="btn btn-secondary" id="mark-article-read">
        ‚úì J‚Äôai lu cet article (gagner de l‚ÄôXP)
      </button>

      <div style="margin-top:12px;">
        <button class="btn btn-primary" id="share-article">üîó Partager cet article / quiz</button>
        <div id="share-feedback" style="font-size:12px;color:var(--text-soft);margin-top:4px;"></div>
      </div>

    </article>

    <!-- QUIZ -->
    <section class="quiz-card" id="quiz-section">

      <div class="quiz-header">
        <div>
          <div class="quiz-title">Quiz express : Hyrox expliqu√©</div>
          <div class="quiz-caption">5 questions pour v√©rifier ce que tu as retenu.</div>
        </div>
        <div class="quiz-badge">‚ö° 5 questions ¬∑ 3 min</div>
      </div>

      <div id="quiz-progress" class="quiz-progress">Question 1 sur 5</div>
      <form id="quiz-form"></form>

      <div class="quiz-footer">
        <div class="quiz-actions">
          <button id="quiz-submit" type="button" class="btn btn-primary">Valider</button>
          <button id="quiz-reset" type="button" class="btn btn-secondary">Recommencer</button>
        </div>
        <div id="quiz-result" class="quiz-result">R√©ponds aux questions puis valide.</div>
      </div>

      <div id="quiz-feedback" class="quiz-feedback"></div>
    </section>

  </main>
</div>

<!-- SCRIPTS -->
<script src="../js/acad-gamification.js"></script>
<script src="../js/acad-firebase-sync.js"></script>

<script>
const ARTICLE_ID = "hyrox-competition-expliquee";

const quizData = [
  {
    id: 1,
    question: "Le format Hyrox officiel est compos√© de :",
    options: [
      "10 km de course uniquement",
      "8 √ó 1 km de course + 8 stations",
      "3 km de course + 1 station",
      "Uniquement des exercices statiques"
    ],
    correctIndex: 1
  },
  {
    id: 2,
    question: "Une station Hyrox peut √™tre :",
    options: [
      "SkiErg, tra√Æneau, burpees, lunges‚Ä¶",
      "Juste du yoga",
      "Uniquement du v√©lo",
      "Uniquement du d√©velopp√© couch√©"
    ],
    correctIndex: 0
  },
  {
    id: 3,
    question: "Quelle cat√©gorie permet de partager les stations √† deux ?",
    options: [
      "Pro",
      "Open",
      "Double",
      "Relais 4"
    ],
    correctIndex: 2
  },
  {
    id: 4,
    question: "Hyrox demande surtout :",
    options: [
      "Endurance + force fonctionnelle",
      "Souplesse extr√™me",
      "Comp√©tences d‚Äôescalade",
      "Uniquement du sprint"
    ],
    correctIndex: 0
  },
  {
    id: 5,
    question: "Un temps d√©butant r√©aliste en Hyrox :",
    options: [
      "30 minutes",
      "1h20‚Äì1h40",
      "3 heures",
      "10 minutes"
    ],
    correctIndex: 1
  }
];

function renderQuiz() {
  const form = document.getElementById("quiz-form");
  form.innerHTML = "";

  quizData.forEach((q, i) => {
    const block = document.createElement("div");
    block.className = "quiz-question";
    block.dataset.questionId = q.id;

    block.innerHTML = `
      <div class="quiz-question-header">
        <div class="quiz-question-label">Q${i + 1}. ${q.question}</div>
        <div class="quiz-question-meta">1 seule r√©ponse</div>
      </div>
      <div class="quiz-options">
        ${q.options.map((opt, idx) => `
          <label class="quiz-option">
            <input type="radio" name="question-${q.id}" value="${idx}">
            <span>${opt}</span>
          </label>
        `).join("")}
      </div>
    `;

    form.appendChild(block);
  });

  document.getElementById("quiz-progress").textContent =
    "Question 1 sur " + quizData.length;
}

renderQuiz();

document.getElementById("quiz-form").addEventListener("change", () => {
  const answered = quizData.filter(q =>
    [...document.querySelectorAll(`input[name="question-${q.id}"]`)]
      .some(r => r.checked)
  ).length;

  document.getElementById("quiz-progress").textContent =
    `Question ${answered || 1} sur ${quizData.length}`;
});

document.getElementById("quiz-submit").addEventListener("click", () => {
  let score = 0;

  document.querySelectorAll(".quiz-option").forEach(o =>
    o.classList.remove("correct","incorrect")
  );

  quizData.forEach(q => {
    const selected = [...document.querySelectorAll(
      `input[name="question-${q.id}"]`
    )].find(r => r.checked);

    const block = document.querySelector(
      `.quiz-question[data-question-id="${q.id}"]`
    );
    const opts = block.querySelectorAll(".quiz-option");

    if (selected && parseInt(selected.value) === q.correctIndex) {
      score++;
      opts[q.correctIndex].classList.add("correct");
    } else {
      opts[q.correctIndex].classList.add("correct");
      if (selected) opts[selected.value].classList.add("incorrect");
    }
  });

  const total = quizData.length;
  const ratio = score / total;

  const msg =
    ratio === 1 ? "Parfait ! Tu as tout compris sur Hyrox üèÅ" :
    ratio >= 0.7 ? "Tr√®s bon score !" :
    ratio >= 0.4 ? "Pas mal, relis certains points." :
    "Relis l‚Äôarticle tranquillement puis retente.";

  document.getElementById("quiz-result").innerHTML =
    `<strong>${score}/${total}</strong> bonnes r√©ponses ‚Ä¢ ${msg}`;

  if (window.acadGamification)
    window.acadGamification.registerQuizResult(ARTICLE_ID, score, total);

  document.getElementById("quiz-feedback").textContent =
    ratio === 1 ? "üéÆ Bravo ! XP bonus ajout√©e." :
    "Tu peux viser le perfect la prochaine fois !";
});

document.getElementById("quiz-reset").addEventListener("click", renderQuiz);

document.getElementById("mark-article-read").addEventListener("click", () => {
  if (window.acadGamification)
    window.acadGamification.markArticleRead(ARTICLE_ID, 20);

  const btn = document.getElementById("mark-article-read");
  btn.textContent = "‚úì Article compt√© pour l‚ÄôXP locale";
  btn.disabled = true;
});

document.getElementById("share-article").addEventListener("click", async () => {
  if (window.acadGamification)
    window.acadGamification.registerShare(ARTICLE_ID, 15);

  const feedback = document.getElementById("share-feedback");

  const data = {
    title: "A-Cad√©mie ‚Äî Hyrox : la nouvelle comp√©tition expliqu√©e",
    text: "Format complet + quiz express",
    url: window.location.href
  };

  if (navigator.share) {
    try {
      await navigator.share(data);
      feedback.textContent = "Merci pour le partage ! (XP ajout√©e)";
    } catch {
      feedback.textContent = "Partage annul√©.";
    }
  } else {
    feedback.textContent = "Partage automatique non disponible.";
  }
});
</script>

</body>
</html>
