<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="utf-8" />
  <title>A-CadÃ©mie â€” Comment manger sain quand on nâ€™a pas le temps</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="../css/acad-style.css">
  <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-app.js"></script>
  <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-auth.js"></script>
  <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-firestore.js"></script>
  <script src="../js/firebase-config.js"></script>
</head>
<body>
  <div class="page">
    <header class="acad-header">
      <a href="../index.html" class="brand" style="text-decoration:none;">
        <div class="brand-logo">A</div>
        <div>
          <div class="brand-text-title">A-CadÃ©mie</div>
          <div class="brand-text-sub">Articles & quiz bien-Ãªtre en libre accÃ¨s</div>
        </div>
      </a>

      <nav class="acad-nav">
        <a class="nav-btn" href="../index.html"><span class="dot"></span> Accueil</a>
        <a class="nav-btn primary" href="../articles.html">Articles</a>
        <a class="nav-btn" href="../recompenses.html">RÃ©compenses</a>
      </nav>

      <div id="acad-profile" class="profile-card">
        <div class="profile-main">
          <div class="profile-avatar">â±ï¸</div>
          <div>
            <div class="profile-level">Niveau <span id="acad-level">1</span></div>
            <div class="profile-xp">
              <span id="acad-xp">0</span> XP locale
            </div>
          </div>
        </div>
        <div class="profile-progress-wrapper">
          <div class="profile-progress-bar">
            <div class="profile-progress-fill" id="acad-xp-bar"></div>
          </div>
          <div class="profile-progress-label">
            <span>Vers niveau <span id="acad-next-level">2</span></span>
            <span id="acad-xp-to-next">0 / 100</span>
          </div>
        </div>
      </div>
    </header>

    <main class="layout">
      <!-- ARTICLE -->
      <article class="article-card">
        <div class="article-meta">
          <span class="tag"><span class="tag-dot"></span> HygiÃ¨ne de vie & Nutrition</span>
          <span class="chip">Lecture : 7 min</span>
          <span class="chip">Niveau : DÃ©butant</span>
        </div>

        <h1 class="article-title">Comment manger sain quand on nâ€™a pas le temps</h1>
        <p class="article-subtitle">
          Entre le travail, la famille, les transports et parfois lâ€™entraÃ®nement, cuisiner â€œparfaitement sainâ€ semble impossible.
          Bonne nouvelle : tu peux dÃ©jÃ  faire Ã©normÃ©ment avec des choix simples, rapides, rÃ©alistes.
        </p>

        <div class="article-highlight">
          <strong>Ã€ retenir :</strong> manger sain sans temps, ce nâ€™est pas faire des plats â€œInstagramâ€,
          mais <strong>rÃ©duire les prises de tÃªte</strong> avec quelques automatismes : courses intelligentes, options rapides, organisation minimale.
        </div>

        <div class="article-content">
          <h2>1. Accepter que â€œassez bienâ€ vaut mieux que â€œparfait ou rienâ€</h2>
          <p>
            Attendre dâ€™avoir 1h pour cuisiner te mÃ¨ne souventâ€¦ Ã  la pizza surgelÃ©e. Lâ€™idÃ©e ici : viser des repas
            <strong>suffisamment</strong> Ã©quilibrÃ©s, mÃªme imparfaits. Un sandwich avec pain complet, jambon, cruditÃ©s
            sera toujours mieux quâ€™un menu ultra transformÃ© avalÃ© en vitesse.
          </p>

          <h2>2. Remplir ton placard avec des â€œsauveurs de repasâ€</h2>
          <p>Quelques aliments qui se conservent bien et se prÃ©parent vite :</p>
          <ul>
            <li>LÃ©gumes surgelÃ©s nature (poÃªlÃ©e, haricots, brocolisâ€¦)</li>
            <li>BoÃ®tes de thon, maquereau, sardines, pois chiches, lentilles</li>
            <li>Riz complet ou semi-complet, pÃ¢tes complÃ¨tes, quinoa, semoule</li>
            <li>Å’ufs, yaourts nature, fromages simples</li>
          </ul>
          <p>
            Avec Ã§a, tu peux faire un repas correct en 10â€“15 minutes sans rÃ©flÃ©chir.
          </p>

          <h2>3. Construire le â€œbol expressâ€ en 3 Ã©lÃ©ments</h2>
          <p>Quand tu es pressÃ©Â·e, pense en 3 blocs plutÃ´t quâ€™en recette :</p>
          <ul>
            <li><strong>1 source de protÃ©ines</strong> : Å“ufs, thon, pois chiches, poulet, tofuâ€¦</li>
            <li><strong>1 portion de lÃ©gumes</strong> : frais, surgelÃ©s ou cruditÃ©s dÃ©jÃ  prÃªtes.</li>
            <li><strong>1 portion de fÃ©culents</strong> : riz, pÃ¢tes, pain complet, quinoaâ€¦</li>
          </ul>
          <p>Tu mÃ©langes, tu assaisonnes simplement (huile dâ€™olive, herbes, citron) et câ€™est fait.</p>

          <h2>4. Utiliser le â€œbatch-cooking lÃ©gerâ€</h2>
          <p>
            Pas besoin de passer 3 heures en cuisine le dimanche. En 30â€“40 minutes, tu peux :
          </p>
          <ul>
            <li>Cuire un grand volume de fÃ©culents (riz, pÃ¢tes, quinoa)</li>
            <li>PrÃ©parer une grosse base de lÃ©gumes (rÃ´tis, poÃªlÃ©s ou en soupe)</li>
            <li>Cuire une ou deux sources de protÃ©ines (poulet, tofu, Å“ufs durs)</li>
          </ul>
          <p>Tu auras alors plusieurs repas â€œprÃªts Ã  assemblerâ€ pour la semaine.</p>

          <h2>5. Faire les bons choix quand tu manges Ã  lâ€™extÃ©rieur</h2>
          <p>
            MÃªme au resto ou au fast-food, tu peux limiter la casse :
          </p>
          <ul>
            <li>Prendre une option avec <strong>protÃ©ines + lÃ©gumes</strong> (salade complÃ¨te, bowl, grilladesâ€¦)</li>
            <li>Ã‰viter de cumuler boisson sucrÃ©e + dessert ultra sucrÃ© + entrÃ©e grasse</li>
            <li>Demander la sauce Ã  part pour doser toi-mÃªme</li>
          </ul>

          <h2>6. Sâ€™Ã©quiper au minimum</h2>
          <p>
            Quelques outils qui changent la vie quand on manque de temps :
          </p>
          <ul>
            <li>Un bon micro-ondes (pour rÃ©chauffer tes prÃ©parations maison ou surgelÃ©s simples)</li>
            <li>Une poÃªle correcte + une casserole</li>
            <li>Une boÃ®te pour emporter ton repas (bento, tupperware)</li>
          </ul>

          <h2>7. Avoir un â€œplan B sainâ€ pour les jours KO</h2>
          <p>
            Garde toujours de quoi faire au moins :
          </p>
          <ul>
            <li>Une omelette + lÃ©gumes surgelÃ©s</li>
            <li>Une soupe + tartines de pain complet + fromage ou Å“uf</li>
            <li>Des lÃ©gumineuses en boÃ®te + riz + lÃ©gumes surgelÃ©s</li>
          </ul>
          <p>
            Ces plans B Ã©vitent les livraisons systÃ©matiques â€œpar fatigueâ€.
          </p>
        </div>

        <div class="article-footer-note">
          <span class="bullet-pill">ğŸ® Gamification locale</span>
          <span>Lecture, quiz et partage de cet article te donnent de lâ€™XP sur cet appareil.</span>
        </div>

        <button type="button" class="btn btn-secondary" id="mark-article-read">
          âœ“ Jâ€™ai lu cet article (gagner de lâ€™XP)
        </button>

        <div style="margin-top:12px;">
          <button type="button" class="btn btn-primary" id="share-article">
            ğŸ”— Partager cet article / quiz
          </button>
          <div id="share-feedback" style="font-size:12px;color:var(--text-soft);margin-top:4px;"></div>
        </div>
      </article>

      <!-- QUIZ -->
      <section class="quiz-card" id="quiz-section">
        <div class="quiz-header">
          <div class="quiz-left">
            <div class="quiz-title">Quiz express : Manger sain sans temps</div>
            <div class="quiz-caption">
              5 questions rapides pour vÃ©rifier que tu as retenu les clÃ©s dâ€™une alimentation plus saine, mÃªme dÃ©bordÃ©Â·e.
            </div>
          </div>
          <div class="quiz-badge">âš¡ 5 questions Â· 3 min</div>
        </div>

        <div class="quiz-progress" id="quiz-progress">Question 1 sur 5</div>
        <form id="quiz-form"></form>

        <div class="quiz-footer">
          <div class="quiz-actions">
            <button type="button" class="btn btn-primary" id="quiz-submit">Valider mes rÃ©ponses</button>
            <button type="button" class="btn btn-secondary" id="quiz-reset">Recommencer le quiz</button>
          </div>
          <div class="quiz-result" id="quiz-result">
            RÃ©ponds aux questions puis valide pour voir ton score.
          </div>
        </div>

        <div class="quiz-feedback" id="quiz-feedback"></div>
      </section>
    </main>
  </div>

  <script src="../js/acad-gamification.js"></script>
  <script src="../js/acad-firebase-sync.js"></script>
  <script>
    const ARTICLE_ID = "manger-sain-quand-on-a-pas-le-temps";

    const quizData = [
      {
        id: 1,
        question: "Quelle idÃ©e rÃ©sume le mieux lâ€™esprit de lâ€™article ?",
        options: [
          "Manger parfaitement ou ne rien faire",
          "Attendre dâ€™avoir beaucoup de temps avant de changer",
          "Faire des choix â€œassez bonsâ€ et rÃ©alistes au quotidien",
          "Ne manger que des salades"
        ],
        correctIndex: 2
      },
      {
        id: 2,
        question: "Quel exemple correspond Ã  un â€œsauveur de repasâ€ du placard ?",
        options: [
          "Biscuits fourrÃ©s",
          "BoÃ®te de pois chiches",
          "Boissons gazeuses",
          "Chips"
        ],
        correctIndex: 1
      },
      {
        id: 3,
        question: "Dans le â€œbol expressâ€, quels sont les 3 Ã©lÃ©ments clÃ©s ?",
        options: [
          "LÃ©gumes, sauce, dessert",
          "ProtÃ©ines, lÃ©gumes, fÃ©culents",
          "Pain, fromage, dessert",
          "Sauce, viande, boisson sucrÃ©e"
        ],
        correctIndex: 1
      },
      {
        id: 4,
        question: "Quel comportement est conseillÃ© quand tu manges Ã  lâ€™extÃ©rieur ?",
        options: [
          "Toujours prendre boisson sucrÃ©e + dessert",
          "Choisir une option avec protÃ©ines + lÃ©gumes",
          "Ne surtout pas manger de lÃ©gumes",
          "Manger le plus vite possible"
        ],
        correctIndex: 1
      },
      {
        id: 5,
        question: "Ã€ quoi sert un â€œplan B sainâ€ ?",
        options: [
          "Ã€ commander systÃ©matiquement Ã  livrer",
          "Ã€ avoir une option rapide pour Ã©viter les choix ultra transformÃ©s",
          "Ã€ sauter le repas pour gagner du temps",
          "Ã€ ne plus jamais cuisiner"
        ],
        correctIndex: 1
      }
    ];

    const quizForm = document.getElementById("quiz-form");
    const quizProgress = document.getElementById("quiz-progress");
    const quizResult = document.getElementById("quiz-result");
    const quizFeedback = document.getElementById("quiz-feedback");
    const submitBtn = document.getElementById("quiz-submit");
    const resetBtn = document.getElementById("quiz-reset");

    function renderQuiz() {
      quizForm.innerHTML = "";
      quizData.forEach((q, index) => {
        const div = document.createElement("div");
        div.className = "quiz-question";
        div.dataset.questionId = q.id;
        div.innerHTML = `
          <div class="quiz-question-header">
            <div class="quiz-question-label">Q${index + 1}. ${q.question}</div>
            <div class="quiz-question-meta">1 seule bonne rÃ©ponse</div>
          </div>
          <div class="quiz-options">
            ${q.options.map((opt, i) => `
              <label class="quiz-option">
                <input type="radio" name="question-${q.id}" value="${i}">
                <span>${opt}</span>
              </label>
            `).join("")}
          </div>
        `;
        quizForm.appendChild(div);
      });
      quizProgress.textContent = "Question 1 sur " + quizData.length;
      quizResult.innerHTML = "RÃ©ponds aux questions puis valide pour voir ton score.";
      quizFeedback.textContent = "";
    }

    function updateProgress() {
      const total = quizData.length;
      const answered = quizData.filter(q =>
        Array.from(document.querySelectorAll('input[name="question-' + q.id + '"]')).some(r => r.checked)
      ).length;
      quizProgress.textContent = "Question " + (answered === 0 ? 1 : answered) + " sur " + total;
    }
    quizForm.addEventListener("change", updateProgress);

    function evaluateQuiz() {
      let score = 0;
      const total = quizData.length;

      document.querySelectorAll(".quiz-option").forEach(o => o.classList.remove("correct","incorrect"));

      quizData.forEach(q => {
        const radios = document.querySelectorAll('input[name="question-' + q.id + '"]');
        let sel = null;
        radios.forEach((r, idx) => { if (r.checked) sel = idx; });

        const block = document.querySelector('.quiz-question[data-question-id="' + q.id + '"]');
        const opts = block.querySelectorAll(".quiz-option");

        if (sel === q.correctIndex) {
          score++;
          if (sel != null) opts[sel].classList.add("correct");
        } else {
          if (q.correctIndex != null && opts[q.correctIndex]) {
            opts[q.correctIndex].classList.add("correct");
          }
          if (sel != null && opts[sel]) {
            opts[sel].classList.add("incorrect");
          }
        }
      });

      const ratio = score / total;
      let msg;
      if (ratio === 1) {
        msg = "Parfait ! Tu as bien compris comment tâ€™organiser pour manger mieux mÃªme sans temps â±ï¸ğŸ¥—";
      } else if (ratio >= 0.7) {
        msg = "TrÃ¨s bon score ! Quelques dÃ©tails Ã  affiner, mais tu es sur la bonne voie.";
      } else if (ratio >= 0.4) {
        msg = "Pas mal : relis lâ€™article et regarde ce que tu peux appliquer dÃ¨s cette semaine.";
      } else {
        msg = "Câ€™est un dÃ©but ! Relis calmement lâ€™article et reviens tenter le quiz.";
      }

      quizResult.innerHTML = `<strong>${score}/${total}</strong> bonnes rÃ©ponses. ${msg}`;

      if (window.acadGamification) {
        window.acadGamification.registerQuizResult(ARTICLE_ID, score, total);
      }

      quizFeedback.textContent = ratio === 1
        ? "ğŸ® Bravo ! Tu contribues au badge HygiÃ¨ne de vie."
        : "Tu peux recommencer le quiz pour viser le 100 % si tu veux.";
    }

    function resetQuiz(){ renderQuiz(); }

    submitBtn.addEventListener("click", evaluateQuiz);
    resetBtn.addEventListener("click", resetQuiz);

    const readBtn = document.getElementById("mark-article-read");
    if (readBtn) {
      readBtn.addEventListener("click", () => {
        if (window.acadGamification) {
          window.acadGamification.markArticleRead(ARTICLE_ID, 20);
        }
        readBtn.textContent = "âœ“ Article comptÃ© pour lâ€™XP locale";
        readBtn.disabled = true;
      });
    }

    const shareBtn = document.getElementById("share-article");
    const shareFeedback = document.getElementById("share-feedback");
    if (shareBtn) {
      shareBtn.addEventListener("click", async () => {
        if (window.acadGamification) {
          window.acadGamification.registerShare(ARTICLE_ID, 15);
        }

        const shareData = {
          title: "A-CadÃ©mie â€” Comment manger sain quand on nâ€™a pas le temps",
          text: "Des solutions simples pour mieux manger mÃªme avec un emploi du temps chargÃ© + un quiz express !",
          url: window.location.href
        };

        if (navigator.share) {
          try {
            await navigator.share(shareData);
            shareFeedback.textContent = "Merci pour le partage ! (XP ajoutÃ©e)";
          } catch(e) {
            shareFeedback.textContent = "Partage annulÃ© ğŸ˜‰";
          }
        } else {
          shareFeedback.textContent = "Le partage automatique nâ€™est pas disponible, mais tu peux copier lâ€™adresse. (XP ajoutÃ©e)";
        }
      });
    }

    renderQuiz();
  </script>
</body>
</html>
