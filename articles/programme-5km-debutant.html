<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="utf-8" />
  <title>A-Cad√©mie ‚Äî Programme 5 km d√©butant (8 semaines)</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="../css/acad-style.css">
  <!-- Firebase -->
  <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-app.js"></script>
  <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-auth.js"></script>
  <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-firestore.js"></script>
  <script src="../js/firebase-config.js"></script>
</head>

<body>
  <div class="page">
    <!-- HEADER identique √† vma.html -->
    <header class="acad-header">
      <a href="../index.html" class="brand" style="text-decoration:none;">
        <div class="brand-logo">A</div>
        <div>
          <div class="brand-text-title">A-Cad√©mie</div>
          <div class="brand-text-sub">Articles & quiz sportifs en libre acc√®s</div>
        </div>
      </a>

      <nav class="acad-nav">
        <a class="nav-btn" href="../index.html"><span class="dot"></span> Accueil</a>
        <a class="nav-btn primary" href="../articles.html">Articles</a>
        <a class="nav-btn" href="../recompenses.html">R√©compenses</a>
      </nav>

      <div id="acad-profile" class="profile-card">
        <div class="profile-main">
          <div class="profile-avatar">üèÅ</div>
          <div>
            <div class="profile-level">Niveau <span id="acad-level">1</span></div>
            <div class="profile-xp"><span id="acad-xp">0</span> XP locale</div>
          </div>
        </div>
        <div class="profile-progress-wrapper">
          <div class="profile-progress-bar">
            <div class="profile-progress-fill" id="acad-xp-bar"></div>
          </div>
          <div class="profile-progress-label">
            <span>Vers niveau <span id="acad-next-level">2</span></span>
            <span id="acad-xp-to-next">0 / 100</span>
          </div>
        </div>
      </div>
    </header>

    <main class="layout">
      <!-- ARTICLE -->
      <article class="article-card">
        <div class="article-meta">
          <span class="tag"><span class="tag-dot"></span> Endurance & Outdoor ‚Äî CAP</span>
          <span class="chip">Lecture : 8‚Äì10 min</span>
          <span class="chip">Niveau : D√©butant absolu</span>
        </div>

        <h1 class="article-title">Programme 5 km d√©butant ‚Äî 8 semaines</h1>
        <p class="article-subtitle">
          Tu pars (presque) de z√©ro et tu veux r√©ussir un 5 km sans souffrir ?  
          Ce plan d√©marre √† <strong>1 min course / 1 min marche</strong> et t‚Äôam√®ne progressivement vers
          <strong>20‚Äì25 min de course continue</strong> en 8 semaines.
        </p>

        <div class="article-highlight">
          <strong>√Ä retenir :</strong> la cl√©, ce n‚Äôest pas d‚Äôaller vite, c‚Äôest d‚Äô√™tre
          <strong>r√©gulier</strong>, de courir en aisance, et de laisser le corps s‚Äôadapter.
        </div>

        <div class="article-content">
          <h2>1. Les r√®gles du jeu</h2>
          <p>Avant de regarder les semaines, garde ces principes en t√™te :</p>
          <ul>
            <li><strong>3 s√©ances par semaine</strong>, espac√©es (ex : lundi ‚Äì mercredi ‚Äì samedi).</li>
            <li>Tu dois pouvoir <strong>parler par petites phrases</strong> en courant.</li>
            <li>Si tu es ‚Äúau bout de ta vie‚Äù ‚Üí tu vas trop vite, tu <strong>ralentis</strong>.</li>
            <li>Une douleur articulaire qui persiste plusieurs s√©ances = on adapte, on ne force pas.</li>
          </ul>

          <h2>2. Vue d‚Äôensemble des 8 semaines</h2>
          <p>Chaque s√©ance suit la m√™me logique : <strong>√©chauffement</strong> ‚Üí <strong>blocs course/marche</strong> ‚Üí <strong>retour au calme</strong>.</p>
          <ul>
            <li><strong>S1 :</strong> 1 min course / 1 min marche √ó 10</li>
            <li><strong>S2 :</strong> 2 min course / 1 min marche √ó 8</li>
            <li><strong>S3 :</strong> 3 min course / 1 min marche √ó 6</li>
            <li><strong>S4 :</strong> 4 min course / 1 min marche √ó 5</li>
            <li><strong>S5 :</strong> 5 min course / 1 min marche √ó 4</li>
            <li><strong>S6 :</strong> 8 min course / 2 min marche √ó 3</li>
            <li><strong>S7 :</strong> 12 min course / 3 min marche √ó 2</li>
            <li><strong>S8 :</strong> 20‚Äì25 min de course continue (objectif 5 km)</li>
          </ul>

          <h2>3. D√©tail semaine par semaine</h2>

          <h3>Semaine 1 ‚Äî D√©couverte</h3>
          <ul>
            <li>√âchauffement : 5 min de marche active.</li>
            <li><strong>1 min course tr√®s lente / 1 min marche</strong> √ó 10.</li>
            <li>Retour au calme : 5 min de marche douce.</li>
          </ul>
          <p>Objectif : apprivoiser la sensation de course, sans chercher √† ‚Äúse prouver quelque chose‚Äù.</p>

          <h3>Semaine 2 ‚Äî On allonge l√©g√®rement</h3>
          <ul>
            <li>√âchauffement : 5 min marche active.</li>
            <li><strong>2 min course / 1 min marche</strong> √ó 8.</li>
            <li>Retour au calme : 5 min marche douce.</li>
          </ul>
          <p>Tu vas courir un peu plus longtemps, mais toujours en aisance.</p>

          <h3>Semaine 3 ‚Äî Stabilisation</h3>
          <ul>
            <li>√âchauffement : 5 min marche active.</li>
            <li><strong>3 min course / 1 min marche</strong> √ó 6.</li>
            <li>Retour au calme : 5 min marche douce.</li>
          </ul>
          <p>Tu commences √† te sentir vraiment ‚Äúcoureur/coureuse‚Äù.</p>

          <h3>Semaine 4 ‚Äî 4 minutes d‚Äôun coup</h3>
          <ul>
            <li>√âchauffement : 5 min marche active.</li>
            <li><strong>4 min course / 1 min marche</strong> √ó 5.</li>
            <li>Retour au calme : 5 min marche douce.</li>
          </ul>

          <h3>Semaine 5 ‚Äî Blocs de 5 minutes</h3>
          <ul>
            <li>√âchauffement : 5 min marche active.</li>
            <li><strong>5 min course / 1 min marche</strong> √ó 4.</li>
            <li>Retour au calme : 5 min marche douce.</li>
          </ul>
          <p>Tu n‚Äôes plus tr√®s loin d‚Äô√™tre capable de courir 20 minutes d‚Äôaffil√©e.</p>

          <h3>Semaine 6 ‚Äî On se rapproche de la continuit√©</h3>
          <ul>
            <li>√âchauffement : 5 min marche active.</li>
            <li><strong>8 min course / 2 min marche</strong> √ó 3.</li>
            <li>Retour au calme : 5 min marche douce.</li>
          </ul>

          <h3>Semaine 7 ‚Äî Deux gros blocs</h3>
          <ul>
            <li>√âchauffement : 5 min marche active.</li>
            <li><strong>12 min course / 3 min marche</strong> √ó 2.</li>
            <li>Retour au calme : 5 min marche douce.</li>
          </ul>
          <p>√Ä ce stade, un footing de 20 minutes en continu devient r√©aliste.</p>

          <h3>Semaine 8 ‚Äî Objectif 5 km</h3>
          <ul>
            <li>√âchauffement : 5 min marche active.</li>
            <li><strong>20 √† 25 min de course continue</strong> en aisance.</li>
            <li>Retour au calme : 5 min marche douce.</li>
          </ul>
          <p>
            Tu ne fais pas encore 5 km ? Ce n‚Äôest pas grave : refais cette semaine ou augmente progressivement
            (ex : +2 min par s√©ance). Le 5 km viendra naturellement.
          </p>

          <h2>4. Conseils pour que √ßa se passe bien</h2>
          <ul>
            <li>Courir vraiment lentement, surtout au d√©but (tu auras l‚Äôimpression de ‚Äúmarcher vite‚Äù).</li>
            <li>Garder au moins un jour de repos entre deux s√©ances.</li>
            <li>Essayer de dormir correctement : c‚Äôest l√† que tu progresses.</li>
            <li>Adapter d√®s qu‚Äôune douleur articulaire persiste plusieurs s√©ances.</li>
          </ul>

          <h2>5. Les erreurs fr√©quentes √† √©viter</h2>
          <ul>
            <li>Aller plus vite que pr√©vu ‚Äúparce que je me sens bien‚Äù.</li>
            <li>Vouloir sauter des semaines pour aller plus vite vers le 5 km.</li>
            <li>Ne faire qu‚Äô1 seule s√©ance par semaine (on perd l‚Äôadaptation).</li>
            <li>Se comparer en permanence aux autres (r√©seaux, applis, potes‚Ä¶).</li>
          </ul>
        </div>

        <div class="article-footer-note">
          <span class="bullet-pill">üéÆ Gamification locale</span>
          <span>Lecture, quiz et partage de cet article te donnent de l‚ÄôXP sur cet appareil.</span>
        </div>

        <button type="button" class="btn btn-secondary" id="mark-article-read">
          ‚úì J‚Äôai lu cet article (gagner de l‚ÄôXP)
        </button>

        <div style="margin-top:12px;">
          <button type="button" class="btn btn-primary" id="share-article">
            üîó Partager cet article / quiz
          </button>
          <div id="share-feedback" style="font-size:12px;color:var(--text-soft);margin-top:4px;"></div>
        </div>
      </article>

      <!-- QUIZ -->
      <section class="quiz-card" id="quiz-section">
        <div class="quiz-header">
          <div class="quiz-left">
            <div class="quiz-title">Quiz express : Programme 5 km</div>
            <div class="quiz-caption">5 questions pour v√©rifier que tu as bien compris la logique du plan.</div>
          </div>
          <div class="quiz-badge">‚ö° 5 questions ¬∑ 3‚Äì4 min</div>
        </div>

        <div class="quiz-progress" id="quiz-progress">Question 1 sur 5</div>
        <form id="quiz-form"></form>

        <div class="quiz-footer">
          <div class="quiz-actions">
            <button type="button" class="btn btn-primary" id="quiz-submit">Valider mes r√©ponses</button>
            <button type="button" class="btn btn-secondary" id="quiz-reset">Recommencer le quiz</button>
          </div>
          <div class="quiz-result" id="quiz-result">
            R√©ponds aux questions puis valide pour voir ton score.
          </div>
        </div>

        <div class="quiz-feedback" id="quiz-feedback"></div>
      </section>
    </main>
  </div>

  <!-- SCRIPTS GAMIFICATION (m√™me que vma.html) -->
  <script src="../js/acad-gamification.js"></script>
  <script src="../js/acad-firebase-sync.js"></script>

  <script>
    const ARTICLE_ID = "programme-5km-debutant";

    const quizData = [
      {
        id: 1,
        question: "Quel est le format de d√©part du programme ?",
        options: [
          "10 min de course continue",
          "1 min de course / 1 min de marche",
          "5 km en continu",
          "20 min de marche uniquement"
        ],
        correctIndex: 1
      },
      {
        id: 2,
        question: "Combien de s√©ances par semaine sont recommand√©es ?",
        options: [
          "1 s√©ance",
          "2 s√©ances",
          "3 s√©ances",
          "7 s√©ances"
        ],
        correctIndex: 2
      },
      {
        id: 3,
        question: "Quel est l‚Äôobjectif de la semaine 8 ?",
        options: [
          "40 min de sprint",
          "20‚Äì25 min de course continue",
          "1 min course / 1 min marche",
          "Uniquement de la marche"
        ],
        correctIndex: 1
      },
      {
        id: 4,
        question: "Comment doit √™tre ton allure pendant les s√©ances ?",
        options: [
          "Le plus vite possible",
          "Au point de ne plus pouvoir parler",
          "En aisance, en pouvant parler par petites phrases",
          "Uniquement en sprint sur 100 m"
        ],
        correctIndex: 2
      },
      {
        id: 5,
        question: "Quelle erreur est fr√©quente chez les d√©butants ?",
        options: [
          "Respecter les alternances course/marche",
          "Aller trop vite et sauter des √©tapes",
          "Faire 3 s√©ances par semaine",
          "Courir lentement au d√©but"
        ],
        correctIndex: 1
      }
    ];

    const quizForm = document.getElementById("quiz-form");
    const quizProgress = document.getElementById("quiz-progress");
    const quizResult = document.getElementById("quiz-result");
    const quizFeedback = document.getElementById("quiz-feedback");
    const submitBtn = document.getElementById("quiz-submit");
    const resetBtn = document.getElementById("quiz-reset");

    function renderQuiz() {
      quizForm.innerHTML = "";
      quizData.forEach((q, index) => {
        const questionDiv = document.createElement("div");
        questionDiv.className = "quiz-question";
        questionDiv.dataset.questionId = q.id;

        questionDiv.innerHTML = `
          <div class="quiz-question-header">
            <div class="quiz-question-label">Q${index + 1}. ${q.question}</div>
            <div class="quiz-question-meta">1 seule bonne r√©ponse</div>
          </div>
          <div class="quiz-options">
            ${q.options
              .map(
                (opt, optIndex) => `
                  <label class="quiz-option">
                    <input type="radio" name="question-${q.id}" value="${optIndex}">
                    <span>${opt}</span>
                  </label>
                `
              )
              .join("")}
          </div>
        `;

        quizForm.appendChild(questionDiv);
      });

      quizProgress.textContent = "Question 1 sur " + quizData.length;
      quizResult.innerHTML = "R√©ponds aux questions puis valide pour voir ton score.";
      quizFeedback.textContent = "";
    }

    function updateProgress() {
      const total = quizData.length;
      const answered = quizData.filter((q) => {
        const radios = document.querySelectorAll('input[name="question-' + q.id + '"]');
        return Array.from(radios).some((r) => r.checked);
      }).length;

      const current = Math.max(1, answered);
      quizProgress.textContent = "Question " + current + " sur " + total;
    }

    quizForm.addEventListener("change", updateProgress);

    function evaluateQuiz() {
      let score = 0;
      const total = quizData.length;

      document.querySelectorAll(".quiz-option").forEach((opt) => {
        opt.classList.remove("correct", "incorrect");
      });

      quizData.forEach((q) => {
        const radios = document.querySelectorAll('input[name="question-' + q.id + '"]');
        let selectedIndex = null;

        radios.forEach((r, idx) => {
          if (r.checked) selectedIndex = idx;
        });

        const questionDiv = document.querySelector('.quiz-question[data-question-id="' + q.id + '"]');
        const optionLabels = questionDiv.querySelectorAll(".quiz-option");

        if (selectedIndex === q.correctIndex) {
          score++;
          if (selectedIndex !== null) {
            optionLabels[selectedIndex].classList.add("correct");
          }
        } else {
          if (q.correctIndex != null && optionLabels[q.correctIndex]) {
            optionLabels[q.correctIndex].classList.add("correct");
          }
          if (selectedIndex !== null && optionLabels[selectedIndex]) {
            optionLabels[selectedIndex].classList.add("incorrect");
          }
        }
      });

      const ratio = score / total;
      let message;

      if (ratio === 1) {
        message = "Parfait, tu ma√Ætrises totalement le plan üëå";
      } else if (ratio >= 0.7) {
        message = "Tr√®s solide ! Tu as compris l‚Äôessentiel.";
      } else if (ratio >= 0.4) {
        message = "Pas mal, mais relire l‚Äôarticle t‚Äôaidera √† consolider les bases.";
      } else {
        message = "C‚Äôest un point de d√©part, retourne sur l‚Äôarticle et reviens tenter ta chance.";
      }

      quizResult.innerHTML = "<strong>" + score + "/" + total + "</strong> bonnes r√©ponses. " + message;

      if (window.acadGamification) {
        window.acadGamification.registerQuizResult(ARTICLE_ID, score, total);
      }

      if (ratio === 1) {
        quizFeedback.textContent = "üéÆ Bravo ! Quiz parfait, tu contribues au d√©blocage du badge Endurance & Outdoor.";
      } else {
        quizFeedback.textContent = "Tu peux recommencer le quiz si tu veux viser le 100 % pour le badge.";
      }
    }

    function resetQuiz() {
      renderQuiz();
    }

    submitBtn.addEventListener("click", evaluateQuiz);
    resetBtn.addEventListener("click", resetQuiz);

    // Bouton "J‚Äôai lu cet article"
    const articleReadBtn = document.getElementById("mark-article-read");
    if (articleReadBtn) {
      articleReadBtn.addEventListener("click", function () {
        if (!window.acadGamification) return;
        window.acadGamification.markArticleRead(ARTICLE_ID, 20);
        articleReadBtn.textContent = "‚úì Article compt√© pour l‚ÄôXP locale";
        articleReadBtn.disabled = true;
      });

      if (window.acadGamification && window.acadGamification.isArticleRead(ARTICLE_ID)) {
        articleReadBtn.textContent = "‚úì Article d√©j√† compt√© pour l‚ÄôXP locale";
        articleReadBtn.disabled = true;
      }
    }

    // Partage
    const shareBtn = document.getElementById("share-article");
    const shareFeedback = document.getElementById("share-feedback");

    if (shareBtn) {
      shareBtn.addEventListener("click", async function () {
        if (window.acadGamification) {
          window.acadGamification.registerShare(ARTICLE_ID, 15);
        }

        const shareData = {
          title: "A-Cad√©mie ‚Äî Programme 5 km d√©butant",
          text: "Programme 5 km en 8 semaines pour d√©butants + quiz express.",
          url: window.location.href
        };

        if (navigator.share) {
          try {
            await navigator.share(shareData);
            if (shareFeedback) {
              shareFeedback.textContent = "Merci pour le partage ! (XP ajout√©e sur cet appareil)";
            }
          } catch (e) {
            if (shareFeedback) {
              shareFeedback.textContent = "Partage annul√©, mais tu peux r√©essayer quand tu veux.";
            }
          }
        } else {
          if (shareFeedback) {
            shareFeedback.textContent =
              "Le partage automatique n‚Äôest pas disponible sur cet appareil. Tu peux copier l‚Äôadresse dans la barre du navigateur. (XP ajout√©e)";
          }
        }
      });
    }

    // D√©marrage
    renderQuiz();
  </script>
</body>
</html>
