<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="utf-8" />
  <title>A-Cad√©mie ‚Äî Programme 5 km d√©butant (8 semaines)</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />

  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="../css/acad-style.css">

  <!-- Firebase -->
  <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-app.js"></script>
  <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-auth.js"></script>
  <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-firestore.js"></script>
  <script src="../js/firebase-config.js"></script>
</head>

<body>
  <div class="page">

    <!-- HEADER -->
    <header class="acad-header">
      <a href="../index.html" class="brand" style="text-decoration:none;">
        <div class="brand-logo">A</div>
        <div>
          <div class="brand-text-title">A-Cad√©mie</div>
          <div class="brand-text-sub">Programme 5 km d√©butant ‚Äî 8 semaines</div>
        </div>
      </a>

      <nav class="acad-nav">
        <a class="nav-btn" href="../index.html"><span class="dot"></span> Accueil</a>
        <a class="nav-btn primary" href="../articles.html">Articles</a>
        <a class="nav-btn" href="../recompenses.html">R√©compenses</a>
      </nav>

      <div id="acad-profile" class="profile-card">
        <div class="profile-main">
          <div class="profile-avatar">üèÅ</div>
          <div>
            <div class="profile-level">Niveau <span id="acad-level">1</span></div>
            <div class="profile-xp"><span id="acad-xp">0</span> XP locale</div>
          </div>
        </div>
        <div class="profile-progress-wrapper">
          <div class="profile-progress-bar">
            <div class="profile-progress-fill" id="acad-xp-bar"></div>
          </div>
          <div class="profile-progress-label">
            <span>Vers niveau <span id="acad-next-level">2</span></span>
            <span id="acad-xp-to-next">0 / 100</span>
          </div>
        </div>
      </div>
    </header>


    <main class="layout">

      <!-- ARTICLE -->
      <article class="article-card">
        <div class="article-meta">
          <span class="tag">
            <span class="tag-dot"></span> Endurance & Outdoor ‚Äî CAP
          </span>
          <span class="chip">Lecture : 10 min</span>
          <span class="chip">Niveau : D√©butant absolu</span>
        </div>

        <h1 class="article-title">Programme 5 km d√©butant ‚Äì 8 semaines</h1>
        <p class="article-subtitle">
          Tu pars (presque) de z√©ro et tu veux courir un 5 km sans souffrir ?  
          Ce programme ultra-progressif d√©marre √† <strong>1 min de course / 1 min de marche</strong> et t‚Äôemm√®ne jusqu‚Äô√†
          <strong>20‚Äì25 min en continu</strong> en 8 semaines.
        </p>

        <div class="article-highlight">
          <strong>√Ä retenir :</strong> ne cherche pas √† aller vite.  
          Le but : <strong>√™tre r√©gulier</strong>, courir en aisance, laisser le corps s‚Äôadapter semaine apr√®s semaine.
        </div>

        <div class="article-content">

          <h2>1Ô∏è‚É£ Les r√®gles du jeu</h2>
          <ul>
            <li><strong>3 s√©ances par semaine</strong>, espac√©es (ex : lundi ‚Äì mercredi ‚Äì samedi)</li>
            <li>Tu dois pouvoir <strong>parler par petites phrases</strong> en courant</li>
            <li>Si tu es ‚Äúau bout de ta vie‚Äù : tu vas trop vite ‚Üí tu <strong>ralentis</strong></li>
            <li>Douleur articulaire qui persiste = on adapte ou on consulte</li>
          </ul>

          <h2>2Ô∏è‚É£ Vue d‚Äôensemble des 8 semaines</h2>
          <ul>
            <li><strong>S1 :</strong> 1 min course / 1 min marche √ó 10</li>
            <li><strong>S2 :</strong> 2 min course / 1 min marche √ó 8</li>
            <li><strong>S3 :</strong> 3 min course / 1 min marche √ó 6</li>
            <li><strong>S4 :</strong> 4 min course / 1 min marche √ó 5</li>
            <li><strong>S5 :</strong> 5 min course / 1 min marche √ó 4</li>
            <li><strong>S6 :</strong> 8 min course / 2 min marche √ó 3</li>
            <li><strong>S7 :</strong> 12 min course / 3 min marche √ó 2</li>
            <li><strong>S8 :</strong> 20‚Äì25 min en continu (objectif 5 km)</li>
          </ul>

          <h2>3Ô∏è‚É£ D√©tail semaine par semaine</h2>

          <h3>Semaine 1 ‚Äî D√©couverte</h3>
          <ul>
            <li>√âchauffement : 5 min de marche active</li>
            <li><strong>1 min course lente / 1 min marche</strong> √ó 10</li>
            <li>Retour au calme : 5 min de marche douce</li>
          </ul>
          <p>Objectif : apprivoiser la sensation de course, sans chercher la performance.</p>

          <h3>Semaine 2 ‚Äî Un peu plus de temps de course</h3>
          <ul>
            <li>√âchauffement : 5 min marche active</li>
            <li><strong>2 min course / 1 min marche</strong> √ó 8</li>
            <li>Retour au calme : 5 min marche douce</li>
          </ul>
          <p>Objectif : habituer le souffle √† des blocs un peu plus longs.</p>

          <h3>Semaine 3 ‚Äî On se stabilise</h3>
          <ul>
            <li>√âchauffement : 5 min marche active</li>
            <li><strong>3 min course / 1 min marche</strong> √ó 6</li>
            <li>Retour au calme : 5 min marche douce</li>
          </ul>

          <h3>Semaine 4 ‚Äî Cap sur les 4 minutes</h3>
          <ul>
            <li>√âchauffement : 5 min marche active</li>
            <li><strong>4 min course / 1 min marche</strong> √ó 5</li>
            <li>Retour au calme : 5 min marche douce</li>
          </ul>

          <h3>Semaine 5 ‚Äî Blocs de 5 minutes</h3>
          <ul>
            <li>√âchauffement : 5 min marche active</li>
            <li><strong>5 min course / 1 min marche</strong> √ó 4</li>
            <li>Retour au calme : 5 min marche douce</li>
          </ul>
          <p>Tu es d√©j√† tr√®s loin du point de d√©part, m√™me si tu cours lentement.</p>

          <h3>Semaine 6 ‚Äî On se rapproche de la sortie continue</h3>
          <ul>
            <li>√âchauffement : 5 min marche active</li>
            <li><strong>8 min course / 2 min marche</strong> √ó 3</li>
            <li>Retour au calme : 5 min marche douce</li>
          </ul>

          <h3>Semaine 7 ‚Äî Deux gros blocs</h3>
          <ul>
            <li>√âchauffement : 5 min marche active</li>
            <li><strong>12 min course / 3 min marche</strong> √ó 2</li>
            <li>Retour au calme : 5 min marche douce</li>
          </ul>

          <h3>Semaine 8 ‚Äî Objectif 5 km</h3>
          <ul>
            <li>√âchauffement : 5 min marche active</li>
            <li><strong>20 √† 25 min de course continue</strong> en aisance</li>
            <li>Retour au calme : 5 min marche douce</li>
          </ul>
          <p>
            Peu importe la vitesse. Si tu ne fais pas encore 5 km, ce n‚Äôest pas grave :
            tu pourras refaire cette semaine ou la rallonger progressivement.
          </p>

          <h2>4Ô∏è‚É£ Conseils pour r√©ussir le programme</h2>
          <ul>
            <li>Courir tr√®s lentement au d√©but (c‚Äôest normal)</li>
            <li>Garder minimum 1 jour de repos entre deux s√©ances</li>
            <li>Essayer de dormir suffisamment (le corps progresse la nuit)</li>
            <li>Ne pas augmenter la dur√©e si une douleur inhabituelle persiste</li>
          </ul>

          <h2>5Ô∏è‚É£ Erreurs fr√©quentes (√† √©viter)</h2>
          <ul>
            <li>Aller trop vite parce qu‚Äôon se ‚Äúsent bien‚Äù le jour J</li>
            <li>Sauter des semaines pour aller plus vite vers le 5 km</li>
            <li>Comparaison permanente avec les autres (r√©seaux, applis‚Ä¶)</li>
            <li>Vouloir courir tous les jours d‚Äôun coup</li>
          </ul>
        </div>

        <div class="article-footer-note">
          <span class="bullet-pill">üéÆ Gamification locale</span>
          <span>Lecture, quiz et partage = XP gagn√©e sur cet appareil.</span>
        </div>

        <button type="button" class="btn btn-secondary" id="mark-article-read">
          ‚úì J‚Äôai lu cet article (gagner de l‚ÄôXP)
        </button>

        <div style="margin-top:12px;">
          <button type="button" class="btn btn-primary" id="share-article">
            üîó Partager cet article / quiz
          </button>
          <div id="share-feedback" style="font-size:12px;color:var(--text-soft);margin-top:4px;"></div>
        </div>
      </article>


      <!-- QUIZ -->
      <section class="quiz-card" id="quiz-section">
        <div class="quiz-header">
          <div class="quiz-left">
            <div class="quiz-title">Quiz express : Programme 5 km</div>
            <div class="quiz-caption">
              5 questions pour v√©rifier que tu as bien compris les bases du plan.
            </div>
          </div>
          <div class="quiz-badge">‚ö° 5 questions ¬∑ 3 min</div>
        </div>

        <div class="quiz-progress" id="quiz-progress">Question 1 sur 5</div>
        <form id="quiz-form"></form>

        <div class="quiz-footer">
          <div class="quiz-actions">
            <button type="button" class="btn btn-primary" id="quiz-submit">Valider mes r√©ponses</button>
            <button type="button" class="btn btn-secondary" id="quiz-reset">Recommencer le quiz</button>
          </div>
          <div class="quiz-result" id="quiz-result">
            R√©ponds aux questions puis valide pour voir ton score.
          </div>
        </div>

        <div class="quiz-feedback" id="quiz-feedback"></div>
      </section>

    </main>
  </div>

  <!-- SCRIPTS GAMIFICATION -->
  <script src="../js/acad-gamification.js"></script>
  <script src="../js/acad-firebase-sync.js"></script>

  <script>
    const ARTICLE_ID = "programme-5km-debutant";

    const quizData = [
      {
        id: 1,
        question: "Quel est le format de d√©part du programme ?",
        options: [
          "10 min de course continue",
          "1 min course / 1 min marche",
          "5 km en continu",
          "20 min de marche uniquement"
        ],
        correctIndex: 1
      },
      {
        id: 2,
        question: "Combien de s√©ances par semaine sont recommand√©es ?",
        options: [
          "1 s√©ance",
          "2 s√©ances",
          "3 s√©ances",
          "7 s√©ances"
        ],
        correctIndex: 2
      },
      {
        id: 3,
        question: "√Ä quelle allure id√©alement faut-il courir ?",
        options: [
          "Le plus vite possible",
          "Au point de ne plus pouvoir parler",
          "En aisance, en pouvant parler par petites phrases",
          "Uniquement en sprint"
        ],
        correctIndex: 2
      },
      {
        id: 4,
        question: "Quel est l‚Äôobjectif de la semaine 8 ?",
        options: [
          "40 min de sprint",
          "20‚Äì25 min de course continue",
          "1 min course / 1 min marche",
          "Uniquement de la marche"
        ],
        correctIndex: 1
      },
      {
        id: 5,
        question: "Quelle erreur est fr√©quente chez les d√©butants ?",
        options: [
          "Courir tr√®s lentement au d√©but",
          "Respecter les alternances course/marche",
          "Aller trop vite et sauter des √©tapes",
          "Faire 3 s√©ances par semaine"
        ],
        correctIndex: 2
      }
    ];

    const quizForm = document.getElementById("quiz-form");
    const quizProgress = document.getElementById("quiz-progress");
    const quizResult = document.getElementById("quiz-result");
    const quizFeedback = document.getElementById("quiz-feedback");
    const submitBtn = document.getElementById("quiz-submit");
    const resetBtn = document.getElementById("quiz-reset");

    function renderQuiz() {
      quizForm.innerHTML = "";
      quizData.forEach((q, index) => {
        const block = document.createElement("div");
        block.className = "quiz-question";
        block.dataset.questionId = q.id;

        block.innerHTML = `
          <div class="quiz-question-header">
            <div class="quiz-question-label">Q${index + 1}. ${q.question}</div>
            <div class="quiz-question-meta">1 seule bonne r√©ponse</div>
          </div>
          <div class="quiz-options">
            ${q.options.map((opt, i) => `
              <label class="quiz-option">
                <input type="radio" name="question-${q.id}" value="${i}">
                <span>${opt}</span>
              </label>
            `).join("")}
          </div>
        `;
        quizForm.appendChild(block);
      });

      quizProgress.textContent = "Question 1 sur " + quizData.length;
      quizResult.textContent = "R√©ponds puis valide pour voir ton score.";
      quizFeedback.textContent = "";
    }

    function updateProgress() {
      const total = quizData.length;
      const answered = quizData.filter(q =>
        Array.from(document.querySelectorAll(\`input[name="question-\${q.id}"]\`))
          .some(r => r.checked)
      ).length;

      quizProgress.textContent = "Question " + (answered || 1) + " sur " + total;
    }
    quizForm.addEventListener("change", updateProgress);

    function evaluateQuiz() {
      let score = 0;

      document.querySelectorAll(".quiz-option").forEach(opt =>
        opt.classList.remove("correct","incorrect")
      );

      quizData.forEach(q => {
        const radios = document.querySelectorAll(\`input[name="question-\${q.id}"]\`);
        let selected = null;
        radios.forEach((r, i) => { if (r.checked) selected = i; });

        const block = document.querySelector(\`.quiz-question[data-question-id="\${q.id}"]\`);
        const options = block.querySelectorAll(".quiz-option");

        if (selected === q.correctIndex) {
          score++;
          if (selected !== null) options[selected]?.classList.add("correct");
        } else {
          options[q.correctIndex]?.classList.add("correct");
          if (selected !== null) options[selected]?.classList.add("incorrect");
        }
      });

      const ratio = score / quizData.length;
      let msg =
        ratio === 1 ? "Parfait ! Tu as toutes les bases pour suivre ce programme üèÅ" :
        ratio >= 0.7 ? "Tr√®s bon score, tu es pr√™t √† te lancer." :
        ratio >= 0.4 ? "Pas mal, relis certains points avant de commencer." :
        "Relis l‚Äôarticle tranquillement puis retente le quiz.";

      quizResult.innerHTML = `<strong>${score}/${quizData.length}</strong> bonnes r√©ponses ‚Ä¢ ${msg}`;

      if (window.acadGamification) {
        window.acadGamification.registerQuizResult(ARTICLE_ID, score, quizData.length);
      }

      quizFeedback.textContent =
        ratio === 1 ? "üéÆ Bravo ! XP bonus pour ce quiz parfait." :
        "Tu peux recommencer pour viser le 100 % si tu veux.";
    }

    submitBtn.addEventListener("click", evaluateQuiz);
    resetBtn.addEventListener("click", renderQuiz);

    // XP lecture
    const readBtn = document.getElementById("mark-article-read");
    if (readBtn) {
      readBtn.addEventListener("click", () => {
        if (window.acadGamification) {
          window.acadGamification.markArticleRead(ARTICLE_ID, 20);
        }
        readBtn.textContent = "‚úì Article compt√© pour l‚ÄôXP locale";
        readBtn.disabled = true;
      });
    }

    // Partage
    const shareBtn = document.getElementById("share-article");
    const shareFeedback = document.getElementById("share-feedback");

    if (shareBtn) {
      shareBtn.addEventListener("click", async () => {
        if (window.acadGamification) {
          window.acadGamification.registerShare(ARTICLE_ID, 15);
        }

        const shareData = {
          title: "A-Cad√©mie ‚Äî Programme 5 km d√©butant",
          text: "Programme 5 km en 8 semaines (d√©butant absolu) + quiz express.",
          url: window.location.href
        };

        if (navigator.share) {
          try {
            await navigator.share(shareData);
            shareFeedback.textContent = "Merci pour le partage ! (XP ajout√©e)";
          } catch {
            shareFeedback.textContent = "Partage annul√© üòâ";
          }
        } else {
          shareFeedback.textContent =
            "Partage automatique non disponible, mais tu peux copier le lien. (XP ajout√©e)";
        }
      });
    }

    // D√©marrage
    renderQuiz();
  </script>

</body>
</html>

