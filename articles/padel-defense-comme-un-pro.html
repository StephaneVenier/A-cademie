<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="utf-8" />
  <title>A-CadÃ©mie â€” Padel : jouer en dÃ©fense comme un pro</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />

  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="../css/acad-style.css">

  <!-- Firebase -->
  <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-app.js"></script>
  <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-auth.js"></script>
  <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-firestore.js"></script>
  <script src="../js/firebase-config.js"></script>
</head>

<body>
<div class="page">

  <!-- HEADER -->
  <header class="acad-header">
    <a href="../index.html" class="brand">
      <div class="brand-logo">A</div>
      <div>
        <div class="brand-text-title">A-CadÃ©mie</div>
        <div class="brand-text-sub">Rackets â€” Padel Â· Article + Quiz</div>
      </div>
    </a>

    <nav class="acad-nav">
      <a href="../index.html" class="nav-btn"><span class="dot"></span> Accueil</a>
      <a href="../articles.html" class="nav-btn primary">Articles</a>
      <a href="../recompenses.html" class="nav-btn">RÃ©compenses</a>
    </nav>

    <div id="acad-profile" class="profile-card">
      <div class="profile-main">
        <div class="profile-avatar">ğŸ¾</div>
        <div>
          <div class="profile-level">Niveau <span id="acad-level">1</span></div>
          <div class="profile-xp"><span id="acad-xp">0</span> XP locale</div>
        </div>
      </div>
      <div class="profile-progress-wrapper">
        <div class="profile-progress-bar">
          <div class="profile-progress-fill" id="acad-xp-bar"></div>
        </div>
        <div class="profile-progress-label">
          <span>Vers niveau <span id="acad-next-level">2</span></span>
          <span id="acad-xp-to-next">0 / 100</span>
        </div>
      </div>
    </div>
  </header>

  <!-- MAIN -->
  <main class="layout">

    <!-- ARTICLE -->
    <article class="article-card">

      <div class="article-meta">
        <span class="tag"><span class="tag-dot"></span> Padel</span>
        <span class="chip">Lecture : 7â€“8 min</span>
        <span class="chip">Niveau : DÃ©butant / IntermÃ©diaire</span>
      </div>

      <h1 class="article-title">Padel : jouer en dÃ©fense comme un pro</h1>
      <p class="article-subtitle">
        Au padel, la dÃ©fense nâ€™est pas subie : bien jouÃ©e, elle devient une arme.  
        Si tu sais gÃ©rer les balles au fond, les murs et les lobs, tu vas rendre fous les adversaires au filet.
      </p>

      <div class="article-highlight">
        <strong>Ã€ retenir :</strong> bonne dÃ©fense = patience + bons appuis + utilisation intelligente des murs + lob bien choisi.
      </div>

      <div class="article-content">

        <h2>1ï¸âƒ£ Position de base en dÃ©fense</h2>
        <p>
          En dÃ©fense, vous jouez Ã  deux prÃ¨s du mur du fond, lÃ©gÃ¨rement devant la ligne.
        </p>
        <ul>
          <li>pieds Ã©cartÃ©s largeur Ã©paules,</li>
          <li>poids du corps lÃ©gÃ¨rement vers lâ€™avant,</li>
          <li>raquette devant toi, hauteur nombril/poitrine.</li>
        </ul>
        <p>
          âœ Lâ€™idÃ©e : Ãªtre prÃªt Ã  reculer vers le mur ou avancer vers la balle.
        </p>

        <h2>2ï¸âƒ£ Accepter les murs (ne pas paniquer)</h2>
        <p>
          La plupart des dÃ©butants paniquent dÃ¨s que la balle se dirige vers la vitre du fond.
        </p>
        <p>
          <strong>RÃ©flexe Ã  adopter :</strong>
        </p>
        <ul>
          <li>se retourner assez tÃ´t vers le mur,</li>
          <li>laisser la balle rebondir sol â†’ mur â†’ revenir vers toi,</li>
          <li>frapper une balle qui ralentitâ€¦ beaucoup plus facile Ã  jouer.</li>
        </ul>

        <h2>3ï¸âƒ£ Jouer simple : croisÃ© et au centre</h2>
        <p>
          En dÃ©fense, lâ€™objectif nâ€™est pas de faire le point, mais de survivre au point.
        </p>
        <ul>
          <li>viser le centre du terrain adverse,</li>
          <li>jouer croisÃ© (trajectoire plus longue â†’ plus de sÃ©curitÃ©),</li>
          <li>Ã©viter les lignes et les coups â€œmiraclesâ€.</li>
        </ul>

        <h2>4ï¸âƒ£ Le lob : ton meilleur alliÃ©</h2>
        <p>
          Un bon lob remet tout le monde Ã  Ã©galitÃ© :
        </p>
        <ul>
          <li>les adversaires reculent,</li>
          <li>tu peux avancer vers le filet,</li>
          <li>le rythme du point change.</li>
        </ul>
        <p>
          âœ Lob = coup clÃ© de la dÃ©fense intelligente.
        </p>

        <h2>5ï¸âƒ£ Sorties de vitre contrÃ´lÃ©es</h2>
        <p>
          Pour bien dÃ©fendre avec les murs :
        </p>
        <ul>
          <li>te placer avant la trajectoire de la balle,</li>
          <li>laisser la balle sortir du mur,</li>
          <li>frapper sans prÃ©cipitation, avec un geste court.</li>
        </ul>
        <p>
          Plus tu paniques, plus tu rates.  
          Plus tu laisses la balle â€œvenir Ã  toiâ€, plus câ€™est facile.
        </p>

        <h2>6ï¸âƒ£ Communication avec ton partenaire</h2>
        <p>
          Une bonne dÃ©fense, câ€™est aussi :
        </p>
        <ul>
          <li>â€œJâ€™ai la vitreâ€, â€œÃ€ toiâ€, â€œLaisseâ€</li>
          <li>ne pas se croiser inutilement,</li>
          <li>protÃ©ger ensemble le centre du terrain.</li>
        </ul>

        <h2>7ï¸âƒ£ Ã‰tat dâ€™esprit dâ€™un bon dÃ©fenseur</h2>
        <ul>
          <li>accepter de jouer un coup de plus que lâ€™adversaire,</li>
          <li>ne pas paniquer sur les balles rapides,</li>
          <li>prendre le temps de choisir entre lob, balle au centre ou balle sur le corps.</li>
        </ul>

        <p>
          Si tu deviens solide en dÃ©fense, tu seras pÃ©nible Ã  jouerâ€¦ et Ã§a, câ€™est un vrai compliment au padel.
        </p>

      </div>

      <!-- FOOTER -->
      <div class="article-footer-note">
        <span class="bullet-pill">ğŸ® Gamification locale</span>
        <span>Lecture, quiz et partage = XP gagnÃ©e sur cet appareil.</span>
      </div>

      <button class="btn btn-secondary" id="mark-article-read">
        âœ“ Jâ€™ai lu cet article (gagner de lâ€™XP)
      </button>

      <div style="margin-top:12px;">
        <button class="btn btn-primary" id="share-article">ğŸ”— Partager cet article / quiz</button>
        <div id="share-feedback" style="font-size:12px;color:var(--text-soft);margin-top:4px;"></div>
      </div>

    </article>


    <!-- QUIZ -->
    <section class="quiz-card" id="quiz-section">

      <div class="quiz-header">
        <div>
          <div class="quiz-title">Quiz express : DÃ©fense au padel</div>
          <div class="quiz-caption">5 questions pour vÃ©rifier que tu dÃ©fends comme un pro.</div>
        </div>
        <div class="quiz-badge">âš¡ 5 questions Â· 3 min</div>
      </div>

      <div id="quiz-progress" class="quiz-progress">Question 1 sur 5</div>
      <form id="quiz-form"></form>

      <div class="quiz-footer">
        <div class="quiz-actions">
          <button id="quiz-submit" type="button" class="btn btn-primary">Valider mes rÃ©ponses</button>
          <button id="quiz-reset" type="button" class="btn btn-secondary">Recommencer le quiz</button>
        </div>
        <div id="quiz-result" class="quiz-result">RÃ©ponds aux questions puis valide pour voir ton score.</div>
      </div>

      <div id="quiz-feedback" class="quiz-feedback"></div>
    </section>

  </main>
</div>

<!-- SCRIPTS -->
<script src="../js/acad-gamification.js"></script>
<script src="../js/acad-firebase-sync.js"></script>

<script>
const ARTICLE_ID = "padel-defense-comme-un-pro";

const quizData = [
  {
    id: 1,
    question: "OÃ¹ se situe la position de base en dÃ©fense ?",
    options: [
      "CollÃ© au filet",
      "ComplÃ¨tement derriÃ¨re le mur",
      "PrÃ¨s du mur du fond, lÃ©gÃ¨rement devant la ligne",
      "Au milieu du terrain"
    ],
    correctIndex: 2
  },
  {
    id: 2,
    question: "Que faut-il faire quand la balle va vers la vitre du fond ?",
    options: [
      "Se jeter dessus avant le mur",
      "Tourner le dos et espÃ©rer",
      "Se retourner tÃ´t, laisser la balle revenir et la jouer calmement",
      "Ne jamais la jouer"
    ],
    correctIndex: 2
  },
  {
    id: 3,
    question: "En dÃ©fense, quel type de coups privilÃ©gier ?",
    options: [
      "Les coups trÃ¨s puissants sur les lignes",
      "Les coups simples vers le centre et croisÃ©s",
      "Uniquement des smashs",
      "Des amorties prÃ¨s du filet"
    ],
    correctIndex: 1
  },
  {
    id: 4,
    question: "Le lob sert principalement Ã  :",
    options: [
      "Finir le point Ã  tout prix",
      "Faire un point gagnant direct",
      "Sortir les adversaires du filet et reprendre lâ€™avantage",
      "Fatiguer ton partenaire"
    ],
    correctIndex: 2
  },
  {
    id: 5,
    question: "Un bon Ã©tat dâ€™esprit dÃ©fensif, câ€™est :",
    options: [
      "Tenter un coup gagnant Ã  chaque balle",
      "Accepter de jouer un coup de plus et rester patient",
      "Abandonner dÃ¨s que la balle est difficile",
      "Ne jamais utiliser les murs"
    ],
    correctIndex: 1
  }
];

const quizForm = document.getElementById("quiz-form");
const quizProgress = document.getElementById("quiz-progress");
const quizResult = document.getElementById("quiz-result");
const quizFeedback = document.getElementById("quiz-feedback");
const submitBtn = document.getElementById("quiz-submit");
const resetBtn = document.getElementById("quiz-reset");

function renderQuiz() {
  quizForm.innerHTML = "";

  quizData.forEach((q, index) => {
    const block = document.createElement("div");
    block.className = "quiz-question";
    block.dataset.questionId = q.id;

    block.innerHTML = `
      <div class="quiz-question-header">
        <div class="quiz-question-label">Q${index + 1}. ${q.question}</div>
        <div class="quiz-question-meta">1 seule bonne rÃ©ponse</div>
      </div>
      <div class="quiz-options">
        ${q.options.map((opt, i) => `
          <label class="quiz-option">
            <input type="radio" name="question-${q.id}" value="${i}">
            <span>${opt}</span>
          </label>
        `).join("")}
      </div>
    `;

    quizForm.appendChild(block);
  });

  quizProgress.textContent = "Question 1 sur " + quizData.length;
  quizResult.textContent = "RÃ©ponds aux questions puis valide pour voir ton score.";
  quizFeedback.textContent = "";
}

function updateProgress() {
  const answered = quizData.filter(q =>
    [...document.querySelectorAll('input[name="question-' + q.id + '"]')]
      .some(r => r.checked)
  ).length;

  quizProgress.textContent = "Question " + (answered || 1) + " sur " + quizData.length;
}

quizForm.addEventListener("change", updateProgress);

function evaluateQuiz() {
  let score = 0;

  document.querySelectorAll(".quiz-option").forEach(opt => {
    opt.classList.remove("correct", "incorrect");
  });

  quizData.forEach(q => {
    const radios = document.querySelectorAll('input[name="question-' + q.id + '"]');
    let selected = null;
    radios.forEach((r, i) => { if (r.checked) selected = i; });

    const block = document.querySelector('.quiz-question[data-question-id="' + q.id + '"]');
    const opts = block.querySelectorAll(".quiz-option");

    if (selected === q.correctIndex) {
      score++;
      if (opts[selected]) opts[selected].classList.add("correct");
    } else {
      if (opts[q.correctIndex]) opts[q.correctIndex].classList.add("correct");
      if (selected !== null && opts[selected]) opts[selected].classList.add("incorrect");
    }
  });

  const total = quizData.length;
  const ratio = score / total;

  let msg =
    ratio === 1 ? "Parfait, tu dÃ©fends comme un vrai poison pour tes adversaires ğŸ¾" :
    ratio >= 0.7 ? "TrÃ¨s bon score, ta dÃ©fense est solide." :
    ratio >= 0.4 ? "Pas mal, mais tu peux encore progresser." :
    "Relis lâ€™article tranquillement puis retente.";

  quizResult.innerHTML = "<strong>" + score + "/" + total + "</strong> bonnes rÃ©ponses â€¢ " + msg;

  if (window.acadGamification) {
    window.acadGamification.registerQuizResult(ARTICLE_ID, score, total);
  }

  quizFeedback.textContent =
    ratio === 1 ? "ğŸ® Bravo ! XP bonus ajoutÃ©e." : "Tu peux viser le perfect !";
}

submitBtn.addEventListener("click", evaluateQuiz);
resetBtn.addEventListener("click", renderQuiz);

const readBtn = document.getElementById("mark-article-read");
if (readBtn) {
  readBtn.addEventListener("click", () => {
    if (window.acadGamification) {
      window.acadGamification.markArticleRead(ARTICLE_ID, 20);
    }
    readBtn.textContent = "âœ“ Article comptÃ© pour lâ€™XP locale";
    readBtn.disabled = true;
  });
}

const shareBtn = document.getElementById("share-article");
const shareFeedback = document.getElementById("share-feedback");

if (shareBtn) {
  shareBtn.addEventListener("click", async () => {
    if (window.acadGamification) {
      window.acadGamification.registerShare(ARTICLE_ID, 15);
    }

    const data = {
      title: "A-CadÃ©mie â€” Padel : jouer en dÃ©fense comme un pro",
      text: "Apprends Ã  dÃ©fendre intelligemment au padel + quiz express.",
      url: window.location.href
    };

    if (navigator.share) {
      try {
        await navigator.share(data);
        shareFeedback.textContent = "Merci pour le partage ! (XP ajoutÃ©e)";
      } catch {
        shareFeedback.textContent = "Partage annulÃ©.";
      }
    } else {
      shareFeedback.textContent = "Le partage automatique nâ€™est pas disponible.";
    }
  });
}

renderQuiz();
</script>

</body>
</html>
