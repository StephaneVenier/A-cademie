<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="utf-8" />
  <title>A-CadÃ©mie â€” Les 10 exercices de mobilitÃ© indispensables</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />

  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="../css/acad-style.css">

  <!-- Firebase -->
  <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-app.js"></script>
  <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-auth.js"></script>
  <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-firestore.js"></script>
  <script src="../js/firebase-config.js"></script>
</head>

<body>
<div class="page">

  <!-- HEADER -->
  <header class="acad-header">
    <a href="../index.html" class="brand">
      <div class="brand-logo">A</div>
      <div>
        <div class="brand-text-title">A-CadÃ©mie</div>
        <div class="brand-text-sub">MobilitÃ© / Pilates / Yoga Â· Article + Quiz</div>
      </div>
    </a>

    <nav class="acad-nav">
      <a href="../index.html" class="nav-btn"><span class="dot"></span> Accueil</a>
      <a href="../articles.html" class="nav-btn primary">Articles</a>
      <a href="../recompenses.html" class="nav-btn">RÃ©compenses</a>
    </nav>

    <div id="acad-profile" class="profile-card">
      <div class="profile-main">
        <div class="profile-avatar">ğŸ§˜â€â™‚ï¸</div>
        <div>
          <div class="profile-level">Niveau <span id="acad-level">1</span></div>
          <div class="profile-xp"><span id="acad-xp">0</span> XP locale</div>
        </div>
      </div>
      <div class="profile-progress-wrapper">
        <div class="profile-progress-bar">
          <div class="profile-progress-fill" id="acad-xp-bar"></div>
        </div>
        <div class="profile-progress-label">
          <span>Vers niveau <span id="acad-next-level">2</span></span>
          <span id="acad-xp-to-next">0 / 100</span>
        </div>
      </div>
    </div>
  </header>

  <!-- MAIN CONTENT -->
  <main class="layout">

    <article class="article-card">

      <div class="article-meta">
        <span class="tag"><span class="tag-dot"></span> MobilitÃ©</span>
        <span class="chip">Lecture : 7 min</span>
        <span class="chip">Niveau : Tous niveaux</span>
      </div>

      <h1 class="article-title">Les 10 exercices de mobilitÃ© indispensables</h1>
      <p class="article-subtitle">
        AmÃ©liorer ta mobilitÃ©, câ€™est bouger mieux, rÃ©duire les tensions et te sentir plus lÃ©ger au quotidien.  
        Voici les 10 mouvements essentiels Ã  intÃ©grer Ã  ta routine, mÃªme si tu nâ€™as que 5 minutes.
      </p>

      <div class="article-highlight">
        <strong>Ã€ retenir :</strong> 5 minutes par jour suffisent pour des rÃ©sultats visibles sur la posture, la souplesse et le confort articulaire.
      </div>

      <div class="article-content">

        <h2>1ï¸âƒ£ Cercles de hanches</h2>
        <p>Debout, mains sur les hanches, effectue des cercles lents dans les deux sens (20â€“30 sec).</p>

        <h2>2ï¸âƒ£ MobilitÃ© thoracique (rotation du haut du dos)</h2>
        <p>Ã€ quatre pattes, main sur la nuque â†’ ouvre le coude vers le ciel, puis referme (6Ã—/cÃ´tÃ©).</p>

        <h2>3ï¸âƒ£ Chatâ€”Vache (spine mobility)</h2>
        <p>Alterner dos rond / dos creux lentement, en suivant la respiration (8â€“10 cycles).</p>

        <h2>4ï¸âƒ£ MobilitÃ© des chevilles</h2>
        <p>En fente, avance le genou au-dessus du pied sans dÃ©coller le talon (10 Ã  12 rÃ©pÃ©titions).</p>

        <h2>5ï¸âƒ£ Cercles dâ€™Ã©paules</h2>
        <p>Grandes rotations vers lâ€™avant puis lâ€™arriÃ¨re (20â€“30 sec).</p>

        <h2>6ï¸âƒ£ Hip opener (genoux ouverts)</h2>
        <p>Assis, pieds collÃ©s, genoux ouverts â†’ petits battements contrÃ´lÃ©s (40 sec).</p>

        <h2>7ï¸âƒ£ Ã‰tirement du psoas (fente longue)</h2>
        <p>En fente, avance le bassin doucement vers lâ€™avant (20â€“30 sec/cÃ´tÃ©).</p>

        <h2>8ï¸âƒ£ Rotation du cou debout</h2>
        <p>Inclinaison gauche/droite + rotation lente du cou (10â€“15 sec par mouvement).</p>

        <h2>9ï¸âƒ£ Rotation interne/externe des hanches</h2>
        <p>Assis, jambes en 90Â°, bascule les genoux de gauche Ã  droite (10Ã—/cÃ´tÃ©).</p>

        <h2>ğŸ”Ÿ Flexion avant / Ã©tirement ischios</h2>
        <p>Debout, penche-toi vers lâ€™avant en relÃ¢chant les bras et la tÃªte (20â€“30 sec).</p>

        <h2>Mini-routine 5 minutes</h2>
        <ul>
          <li>Chats-Vache â€” 40 sec</li>
          <li>Hanches 90/90 â€” 40 sec</li>
          <li>Chevilles â€” 40 sec</li>
          <li>Psoas â€” 40 sec/cÃ´tÃ©</li>
          <li>Flexion avant â€” 40 sec</li>
        </ul>

        <p>Fais-la tous les jours â†’ tu te sentiras plus souple, plus Ã©quilibrÃ©, plus mobile.</p>

      </div>

      <!-- FOOTER GAMIFICATION -->
      <div class="article-footer-note">
        <span class="bullet-pill">ğŸ® Gamification locale</span>
        <span>Lecture, quiz et partage = XP gagnÃ©e.</span>
      </div>

      <button class="btn btn-secondary" id="mark-article-read">
        âœ“ Jâ€™ai lu cet article (gagner de lâ€™XP)
      </button>

      <div style="margin-top:12px;">
        <button class="btn btn-primary" id="share-article">ğŸ”— Partager cet article / quiz</button>
        <div id="share-feedback" style="font-size:12px;margin-top:4px;color:var(--text-soft);"></div>
      </div>

    </article>

    <!-- QUIZ -->
    <section class="quiz-card" id="quiz-section">

      <div class="quiz-header">
        <div>
          <div class="quiz-title">Quiz express : MobilitÃ©</div>
          <div class="quiz-caption">5 questions pour valider tes connaissances.</div>
        </div>
        <div class="quiz-badge">âš¡ 5 questions Â· 3 min</div>
      </div>

      <div id="quiz-progress" class="quiz-progress">Question 1 sur 5</div>
      <form id="quiz-form"></form>

      <div class="quiz-footer">
        <div class="quiz-actions">
          <button id="quiz-submit" type="button" class="btn btn-primary">Valider</button>
          <button id="quiz-reset" type="button" class="btn btn-secondary">Recommencer</button>
        </div>
        <div id="quiz-result" class="quiz-result">RÃ©ponds aux questions puis valide.</div>
      </div>

      <div id="quiz-feedback" class="quiz-feedback"></div>
    </section>

  </main>
</div>

<!-- JS GAMIFICATION -->
<script src="../js/acad-gamification.js"></script>
<script src="../js/acad-firebase-sync.js"></script>

<script>
const ARTICLE_ID = "mobilite-10-exercices";

const quizData = [
  {
    id: 1,
    question: "La mobilitÃ© sert principalement Ã  :",
    options: [
      "Faire du cardio",
      "Bouger mieux et rÃ©duire les tensions",
      "Perdre du poids uniquement",
      "Remplacer la musculation"
    ],
    correctIndex: 1
  },
  {
    id: 2,
    question: "Quel exercice mobilise la colonne vertÃ©brale ?",
    options: [
      "Flexion avant statique",
      "Chatâ€”Vache",
      "Fente psoas",
      "Cercles de hanches"
    ],
    correctIndex: 1
  },
  {
    id: 3,
    question: "Quel mouvement est recommandÃ© pour les chevilles ?",
    options: [
      "Pas chassÃ©s",
      "Fente en avanÃ§ant le genou",
      "Cercles dâ€™Ã©paules",
      "Planche latÃ©rale"
    ],
    correctIndex: 1
  },
  {
    id: 4,
    question: "Combien de temps suffit pour une mini-routine utile ?",
    options: ["2 min", "5 min", "15 min", "45 min"],
    correctIndex: 1
  },
  {
    id: 5,
    question: "Quel exercice cible la mobilitÃ© des hanches ?",
    options: [
      "Psoas (fente)",
      "Flexions rapides",
      "Dips",
      "Burpees"
    ],
    correctIndex: 0
  }
];

function renderQuiz() {
  const form = document.getElementById("quiz-form");
  form.innerHTML = "";

  quizData.forEach((q, index) => {
    const block = document.createElement("div");
    block.className = "quiz-question";
    block.dataset.questionId = q.id;

    block.innerHTML = `
      <div class="quiz-question-header">
        <div class="quiz-question-label">Q${index + 1}. ${q.question}</div>
        <div class="quiz-question-meta">1 seule rÃ©ponse</div>
      </div>
      <div class="quiz-options">
        ${q.options.map(
          (opt, i) => `
          <label class="quiz-option">
            <input type="radio" name="question-${q.id}" value="${i}">
            <span>${opt}</span>
          </label>`
        ).join("")}
      </div>
    `;

    form.appendChild(block);
  });

  document.getElementById("quiz-progress").textContent =
    "Question 1 sur " + quizData.length;
}

renderQuiz();

document.getElementById("quiz-form").addEventListener("change", () => {
  const answered = quizData.filter(q =>
    [...document.querySelectorAll(`input[name="question-${q.id}"]`)]
      .some(r => r.checked)
  ).length;

  document.getElementById("quiz-progress").textContent =
    `Question ${answered || 1} sur ${quizData.length}`;
});

document.getElementById("quiz-submit").addEventListener("click", () => {
  let score = 0;

  document.querySelectorAll(".quiz-option").forEach(o => o.classList.remove("correct","incorrect"));

  quizData.forEach(q => {
    const selected = [...document.querySelectorAll(`input[name="question-${q.id}"]`)]
      .find(r => r.checked);

    const block = document.querySelector(`.quiz-question[data-question-id="${q.id}"]`);
    const opts = block.querySelectorAll(".quiz-option");

    if (selected && parseInt(selected.value) === q.correctIndex) {
      score++;
      opts[q.correctIndex].classList.add("correct");
    } else {
      opts[q.correctIndex].classList.add("correct");
      if (selected) opts[selected.value].classList.add("incorrect");
    }
  });

  const total = quizData.length;
  document.getElementById("quiz-result").innerHTML =
    `<strong>${score}/${total}</strong> bonnes rÃ©ponses`;

  if (window.acadGamification)
    window.acadGamification.registerQuizResult(ARTICLE_ID, score, total);

  document.getElementById("quiz-feedback").textContent =
    score === total ? "ğŸ® Parfait !" : "Tu peux encore progresser !";
});

document.getElementById("quiz-reset").addEventListener("click", renderQuiz);

document.getElementById("mark-article-read").addEventListener("click", () => {
  if (window.acadGamification)
    window.acadGamification.markArticleRead(ARTICLE_ID, 20);

  const btn = document.getElementById("mark-article-read");
  btn.textContent = "âœ“ Article comptÃ© pour lâ€™XP locale";
  btn.disabled = true;
});

document.getElementById("share-article").addEventListener("click", async () => {
  if (window.acadGamification)
    window.acadGamification.registerShare(ARTICLE_ID, 15);

  const shareFeedback = document.getElementById("share-feedback");

  const data = {
    title: "A-CadÃ©mie â€” 10 exercices de mobilitÃ© indispensables",
    text: "Mobility routine + quiz rapide",
    url: window.location.href
  };

  if (navigator.share) {
    try {
      await navigator.share(data);
      shareFeedback.textContent = "Merci pour le partage ! (XP ajoutÃ©e)";
    } catch {
      shareFeedback.textContent = "Partage annulÃ©.";
    }
  } else {
    shareFeedback.textContent = "Le partage automatique nâ€™est pas disponible.";
  }
});
</script>

</body>
</html>
