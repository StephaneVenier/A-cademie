<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="utf-8" />
  <title>A-Cad√©mie ‚Äî Accueil</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="description" content="A-Cad√©mie : articles et quiz sportifs en libre acc√®s pour mieux comprendre l‚Äôentra√Ænement, la VMA, l‚Äôendurance et la pr√©vention des blessures. XP locale et badges sans cr√©ation de compte.">
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="./css/acad-style.css">

  <!-- Styles sp√©cifiques recherche + bande horizontale -->
  <style>
    /* Barre de recherche */
    .search-hero {
      padding: 24px 20px;
      margin-bottom: 24px;
    }
    .search-hero-content {
      max-width: 720px;
    }
    .search-bar-wrapper {
      margin-top: 16px;
    }
    .search-bar {
      width: 100%;
      max-width: 480px;
    }
    .search-results {
      margin-top: 8px;
      max-width: 480px;
    }
    .search-results-list {
      list-style: none;
      margin: 0;
      padding: 8px 0;
      border-radius: 12px;
    }
    .search-result-item a {
      display: block;
      padding: 6px 0;
      text-decoration: none;
      font-size: 14px;
    }
    .search-result-item a:hover {
      text-decoration: underline;
    }
    .search-empty {
      font-size: 13px;
      opacity: 0.8;
      margin-top: 4px;
    }

    /* Bande horizontale avec images */
    .featured-strip {
      margin-bottom: 24px;
    }
    .featured-strip .section-title {
      margin-bottom: 12px;
    }
    .featured-scroll {
      display: flex;
      gap: 16px;
      overflow-x: auto;
      padding-bottom: 4px;
    }
    .featured-card {
      min-width: 230px;
      max-width: 260px;
      flex: 0 0 auto;
      border-radius: 16px;
      overflow: hidden;
      text-decoration: none;
      box-shadow: 0 4px 12px rgba(15,23,42,0.10);
      background: #fff;
    }
    .featured-image {
      height: 120px;
      background-size: cover;
      background-position: center;
    }
    .featured-info {
      padding: 10px 12px 12px;
    }
    .featured-tag {
      font-size: 11px;
      text-transform: uppercase;
      opacity: 0.7;
    }
    .featured-title {
      font-size: 14px;
      font-weight: 600;
      margin-top: 4px;
      color: #111827;
    }
  </style>

  <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-app.js"></script>
  <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-auth.js"></script>
  <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-firestore.js"></script>
  <script src="./js/firebase-config.js"></script>
</head>
<body>
  <div class="page">
    <header class="acad-header">
      <div class="brand">
        <div class="brand-logo">A</div>
        <div>
          <div class="brand-text-title">A-Cad√©mie</div>
          <div class="brand-text-sub">Articles & quiz sportifs en libre acc√®s</div>
        </div>
      </div>

      <nav class="acad-nav">
        <a class="nav-btn primary" href="./index.html"><span class="dot"></span> Accueil</a>
        <a class="nav-btn" href="./articles.html">Articles</a>
        <a class="nav-btn" href="./recompenses.html">R√©compenses</a>
      </nav>

      <div id="acad-profile" class="profile-card">
        <div class="profile-main">
          <div class="profile-avatar">A</div>
          <div>
            <div class="profile-level">Niveau <span id="acad-level">1</span></div>
            <div class="profile-xp">
              <span id="acad-xp">0</span> XP locale
            </div>
          </div>
        </div>
        <div class="profile-progress-wrapper">
          <div class="profile-progress-bar">
            <div class="profile-progress-fill" id="acad-xp-bar"></div>
          </div>
          <div class="profile-progress-label">
            <span>Vers niveau <span id="acad-next-level">2</span></span>
            <span id="acad-xp-to-next">0 / 100</span>
          </div>
        </div>
      </div>
    </header>

    <main id="top">

      <!-- HERO RECHERCHE EN HAUT -->
      <section class="card search-hero">
        <div class="search-hero-content">
          <h1 class="hero-title">Que veux-tu apprendre aujourd‚Äôhui ?</h1>
          <p class="hero-subtitle">
            Tape un mot-cl√© (VMA, endurance, √©chauffement‚Ä¶) et trouve directement l‚Äôarticle qui t‚Äôint√©resse.
          </p>

          <div class="search-bar-wrapper">
            <input
              id="article-search-input"
              type="search"
              class="input search-bar"
              placeholder="Rechercher un article (VMA, endurance, √©chauffement...)"
              autocomplete="off"
            />
          </div>

          <div id="search-results" class="search-results"></div>
        </div>
      </section>

      <!-- BANDE HORIZONTALE AVEC IMAGES -->
      <section class="card featured-strip">
        <h2 class="section-title">En ce moment sur A-Cad√©mie</h2>
        <div class="featured-scroll">
          <a class="featured-card" href="./articles/vma.html">
            <div class="featured-image" style="background-image:url('./assets/visuels/vma.jpg');"></div>
            <div class="featured-info">
              <div class="featured-tag">Endurance & VMA</div>
              <div class="featured-title">Comprendre ta VMA</div>
            </div>
          </a>

          <a class="featured-card" href="./articles/endurance-fondamentale.html">
            <div class="featured-image" style="background-image:url('./assets/visuels/endurance.jpg');"></div>
            <div class="featured-info">
              <div class="featured-tag">Endurance & VMA</div>
              <div class="featured-title">Endurance fondamentale</div>
            </div>
          </a>

          <a class="featured-card" href="./articles/echauffement-5min.html">
            <div class="featured-image" style="background-image:url('./assets/visuels/echauffement.jpg');"></div>
            <div class="featured-info">
              <div class="featured-tag">Pr√©vention & mobilit√©</div>
              <div class="featured-title">√âchauffement 5 minutes</div>
            </div>
          </a>
        </div>
      </section>

      <!-- HERO D'ORIGINE -->
      <section class="card hero">
        <div>
          <h1 class="hero-title">Apprends, comprends, applique le sport au quotidien.</h1>
          <p class="hero-subtitle">
            A-Cad√©mie est une biblioth√®que sportive moderne : des articles clairs, des quiz rapides et une petite dose de gamification locale
            pour suivre ta progression ‚Äî sans compte, sans mot de passe.
          </p>

          <div class="hero-stats">
            <span class="stat-pill">üìö Articles p√©dagogiques</span>
            <span class="stat-pill">üß† Quiz express</span>
            <span class="stat-pill">üèÖ Badges de progression</span>
          </div>

          <div class="hero-actions">
            <a class="btn btn-primary" href="#start-here">Commencer ici</a>
            <a class="btn btn-secondary" href="./articles.html">Voir tous les articles</a>
          </div>

          <p class="hero-note">
            ‚ûú La progression (XP, niveau, badges) est enregistr√©e uniquement sur ton appareil. Tu peux revenir quand tu veux, tout est conserv√©.
          </p>
        </div>

        <aside class="hero-side">
          <div class="hero-side-title">Comment √ßa marche ?</div>
          <ul class="hero-side-list">
            <li>Tu choisis un article qui t‚Äôint√©resse.</li>
            <li>Tu lis, tu fais le quiz, tu peux partager si tu veux.</li>
            <li>Chaque action te donne un peu d‚ÄôXP et d√©bloque des badges.</li>
          </ul>
          <div class="hero-note">
            Objectif : rendre l‚Äôapprentissage du sport aussi satisfaisant qu‚Äôun bon jeu vid√©o‚Ä¶ mais sans prise de t√™te.
          </div>
        </aside>
      </section>

      <!-- PAR O√ô COMMENCER -->
      <section id="start-here" class="card">
        <h2 class="section-title">Par o√π commencer ?</h2>
        <p class="section-subtitle">
          Si tu d√©couvres A-Cad√©mie, voici 3 √©tapes simples pour poser de bonnes bases en course √† pied.
        </p>

        <div class="categories-grid">
          <div class="category-card">
            <div class="category-header">
              <div class="category-title">1Ô∏è‚É£ Comprendre ta VMA</div>
              <div class="category-icon">‚ûú</div>
            </div>
            <div class="category-meta">D√©couvre ce qu‚Äôest la VMA, comment la tester et √† quoi elle sert dans tes entra√Ænements.</div>
            <div class="category-articles">
              ‚Ä¢ <a href="./articles/vma.html">Comprendre ta VMA (article + quiz)</a>
            </div>
          </div>

          <div class="category-card">
            <div class="category-header">
              <div class="category-title">2Ô∏è‚É£ Construire ton endurance</div>
              <div class="category-icon">‚ûú</div>
            </div>
            <div class="category-meta">La base de tout : courir lentement, longtemps, sans t‚Äô√©puiser.</div>
            <div class="category-articles">
              ‚Ä¢ <a href="./articles/endurance-fondamentale.html">Endurance fondamentale : courir ‚Äútrop lentement‚Äù pour progresser</a>
            </div>
          </div>

          <div class="category-card">
            <div class="category-header">
              <div class="category-title">3Ô∏è‚É£ T‚Äô√©chauffer efficacement</div>
            <div class="category-icon">‚ûú</div>
            </div>
            <div class="category-meta">Un √©chauffement court pour pr√©parer ton corps et limiter les blessures.</div>
            <div class="category-articles">
              ‚Ä¢ <a href="./articles/echauffement-5min.html">√âchauffement 5 minutes avant s√©ance (article + quiz)</a>
            </div>
          </div>
        </div>
      </section>

      <section class="card">
        <h2 class="section-title">Ce que tu trouveras sur A-Cad√©mie</h2>
        <p class="section-subtitle">
          Le site va progressivement s‚Äôenrichir. L‚Äôobjectif est de cr√©er une vraie biblioth√®que multisports, simple √† explorer.
        </p>

        <div class="categories-grid">
          <div class="category-card">
            <div class="category-header">
              <div class="category-title">üèÉ‚Äç‚ôÇÔ∏è Endurance & VMA</div>
              <div class="category-icon">‚ûú</div>
            </div>
            <div class="category-meta">Comprendre la VMA, doser tes allures et construire ton endurance de base.</div>
            <div class="category-articles">
              ‚Ä¢ <a href="./articles/vma.html">Comprendre ta VMA (article + quiz)</a><br>
              ‚Ä¢ <a href="./articles/endurance-fondamentale.html">Endurance fondamentale : courir ‚Äútrop lentement‚Äù pour progresser</a>
            </div>
          </div>

          <div class="category-card">
            <div class="category-header">
              <div class="category-title">üèãÔ∏è‚Äç‚ôÄÔ∏è Force & Musculation</div>
              <div class="category-icon">‚ûú</div>
            </div>
            <div class="category-meta">Bient√¥t : programmes simples, mouvements de base, progressions.</div>
          </div>

          <div class="category-card">
            <div class="category-header">
              <div class="category-title">üßò Mobilit√© & Pr√©vention</div>
              <div class="category-icon">‚ûú</div>
            </div>
            <div class="category-meta">√âchauffement rapide, mobilit√© utile, pr√©vention des blessures.</div>
            <div class="category-articles">
              ‚Ä¢ <a href="./articles/echauffement-5min.html">√âchauffement 5 minutes avant s√©ance (article + quiz)</a>
            </div>
          </div>
        </div>
      </section>

      <section class="card">
        <h2 class="section-title">R√©compenses & badges</h2>
        <p class="section-subtitle">
          Chaque cat√©gorie a (ou aura) ses propres badges √† d√©bloquer. Commence par Endurance & VMA et Mobilit√© & Pr√©vention.
        </p>

        <div class="badges-grid">
          <div class="badge-card">
            <div class="badge-title">Badge ‚ÄúEndurance & VMA‚Äù</div>
            <div class="badge-status locked" id="badge-status-endurance">üîí Verrouill√©</div>
            <div class="badge-tag">
              Condition : lire les articles VMA + Endurance fondamentale et r√©ussir les quiz √† 100&nbsp;%.
            </div>
          </div>

          <div class="badge-card">
            <div class="badge-title">Badge ‚ÄúMobilit√© & Pr√©vention‚Äù</div>
            <div class="badge-status locked" id="badge-status-mobilite">üîí Verrouill√©</div>
            <div class="badge-tag">
              Condition : lire l‚Äôarticle √âchauffement 5 minutes et r√©ussir le quiz √† 100&nbsp;%.
            </div>
          </div>
        </div>
      </section>

      <section class="card">
        <div class="newsletter">
          <div>
            <div class="section-title" style="font-size:16px;margin-bottom:4px;">La suite du projet</div>
            <div>De nouveaux articles, quiz et badges viendront s‚Äôajouter progressivement dans diff√©rentes disciplines.</div>
          </div>
          <div class="newsletter-inputs">
            <input class="input" type="email" placeholder="Inscription newsletter (√† venir)" disabled />
            <button class="btn btn-secondary" disabled>Fonctionnalit√© √† venir</button>
          </div>
        </div>
      </section>

      <footer>
        <span>¬© A-Cad√©mie ‚Äî Ressources sportives en libre acc√®s.</span>
        <span>
          <a href="#">Mentions l√©gales</a> ¬∑
          <a href="#">Confidentialit√©</a> ¬∑
          <a href="#">Contact</a>
        </span>
      </footer>
    </main>
  </div>

  <script src="./js/acad-gamification.js"></script>
  <script src="./js/acad-firebase-sync.js"></script>
  <script>
    document.addEventListener("DOMContentLoaded", function () {
      if (!window.acadGamification) return;

      // Badge Endurance & VMA (vma + endurance-fondamentale)
      const endStatus = document.getElementById("badge-status-endurance");
      if (endStatus) {
        const hasVma = window.acadGamification.isArticleRead("vma") &&
                       window.acadGamification.hasPerfectQuiz("vma");
        const hasEF = window.acadGamification.isArticleRead("endurance-fondamentale") &&
                      window.acadGamification.hasPerfectQuiz("endurance-fondamentale");

        if (hasVma && hasEF) {
          endStatus.textContent = "‚úÖ D√©verrouill√©";
          endStatus.classList.remove("locked");
          endStatus.classList.add("unlocked");
        } else {
          endStatus.textContent = "üîí Verrouill√©";
          endStatus.classList.remove("unlocked");
          endStatus.classList.add("locked");
        }
      }

      // Badge Mobilit√© & Pr√©vention (√©chauffement-5min)
      const mobStatus = document.getElementById("badge-status-mobilite");
      if (mobStatus) {
        const hasMob = window.acadGamification.isArticleRead("echauffement-5min") &&
                       window.acadGamification.hasPerfectQuiz("echauffement-5min");
        if (hasMob) {
          mobStatus.textContent = "‚úÖ D√©verrouill√©";
          mobStatus.classList.remove("locked");
          mobStatus.classList.add("unlocked");
        } else {
          mobStatus.textContent = "üîí Verrouill√©";
          mobStatus.classList.remove("unlocked");
          mobStatus.classList.add("locked");
        }
      }
    });
  </script>

  <!-- Script de recherche d‚Äôarticles -->
  <script>
    const ACAD_ARTICLES_INDEX = [
      {
        id: "vma",
        title: "Comprendre ta VMA (article + quiz)",
        url: "./articles/vma.html",
        keywords: "vma vitesse maximale a√©robie test demi cooper course"
      },
      {
        id: "endurance-fondamentale",
        title: "Endurance fondamentale : courir ‚Äútrop lentement‚Äù pour progresser",
        url: "./articles/endurance-fondamentale.html",
        keywords: "endurance fondamentale footing lent base a√©robie"
      },
      {
        id: "echauffement-5min",
        title: "√âchauffement 5 minutes avant s√©ance",
        url: "./articles/echauffement-5min.html",
        keywords: "echauffement 5 minutes mobilit√© pr√©paration"
      }
      // ‚ûú Tu pourras compl√©ter la liste avec tous tes articles
    ];

    const searchInput = document.getElementById("article-search-input");
    const resultsBox = document.getElementById("search-results");

    if (searchInput && resultsBox) {
      searchInput.addEventListener("input", () => {
        const q = searchInput.value.trim().toLowerCase();
        resultsBox.innerHTML = "";
        if (!q) return;

        const matches = ACAD_ARTICLES_INDEX.filter((art) => {
          return (
            art.title.toLowerCase().includes(q) ||
            art.keywords.toLowerCase().includes(q)
          );
        }).slice(0, 6);

        if (!matches.length) {
          resultsBox.innerHTML = '<div class="search-empty">Aucun article trouv√© pour cette recherche.</div>';
          return;
        }

        const list = document.createElement("ul");
        list.className = "search-results-list";

        matches.forEach((art) => {
          const li = document.createElement("li");
          li.className = "search-result-item";
          li.innerHTML = `<a href="${art.url}">${art.title}</a>`;
          list.appendChild(li);
        });

        resultsBox.appendChild(list);
      });
    }
  </script>
</body>
</html>
