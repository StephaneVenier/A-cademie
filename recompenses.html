
<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="utf-8" />
  <title>A-CadÃ©mie â€” RÃ©compenses</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="./css/acad-style.css">
</head>
<body>
  <div class="page">
    <header class="acad-header">
      <div class="brand">
        <div class="brand-logo">A</div>
        <div>
          <div class="brand-text-title">A-CadÃ©mie</div>
          <div class="brand-text-sub">Articles & quiz sportifs en libre accÃ¨s</div>
        </div>
      </div>

      <nav class="acad-nav">
        <a class="nav-btn" href="./index.html"><span class="dot"></span> Accueil</a>
        <a class="nav-btn" href="./articles.html">Articles</a>
        <a class="nav-btn primary" href="./recompenses.html">RÃ©compenses</a>
      </nav>

      <div id="acad-profile" class="profile-card">
        <div class="profile-main">
          <div class="profile-avatar">A</div>
          <div>
            <div class="profile-level">Niveau <span id="acad-level">1</span></div>
            <div class="profile-xp">
              <span id="acad-xp">0</span> XP locale
            </div>
          </div>
        </div>
        <div class="profile-progress-wrapper">
          <div class="profile-progress-bar">
            <div class="profile-progress-fill" id="acad-xp-bar"></div>
          </div>
          <div class="profile-progress-label">
            <span>Vers niveau <span id="acad-next-level">2</span></span>
            <span id="acad-xp-to-next">0 / 100</span>
          </div>
        </div>
      </div>
    </header>

    <main>
      <section class="card">
        <h1 class="section-title">Badges & rÃ©compenses</h1>
        <p class="section-subtitle">
          Un badge par grande activitÃ©. Pour lâ€™instant : Endurance & VMA. Plus tard, tu pourras ajouter ici autant de badges que tu veux.
        </p>

        <div class="badges-grid" id="badges-grid">
          <!-- Exemple de badge : Endurance & VMA -->
          <div class="badge-card" data-badge-id="badge_endurance_vma" data-required-articles="vma">
            <div class="badge-title">Badge â€œEndurance & VMAâ€</div>
            <div class="badge-status locked">ğŸ”’ VerrouillÃ©</div>
            <div class="badge-tag">
              Condition : lire les articles de la catÃ©gorie Endurance & VMA et rÃ©ussir chaque quiz Ã  100&nbsp;%.
            </div>
          </div>

          <!-- Tu pourras dupliquer ceci pour dâ€™autres catÃ©gories :
          <div class="badge-card" data-badge-id="badge_force" data-required-articles="force_debutant,force_intermediaire">
            <div class="badge-title">Badge â€œForce & Musculationâ€</div>
            <div class="badge-status locked">ğŸ”’ VerrouillÃ©</div>
            <div class="badge-tag">
              Condition : lire tous les articles Force & Musculation et rÃ©ussir les quiz Ã  100 %.
            </div>
          </div>
          -->
        </div>
      </section>

      <footer>
        <span>Â© A-CadÃ©mie â€” Ressources sportives en libre accÃ¨s.</span>
        <span>
          <a href="#">Mentions lÃ©gales</a> Â·
          <a href="#">ConfidentialitÃ©</a> Â·
          <a href="#">Contact</a>
        </span>
      </footer>
    </main>
  </div>

  <script src="./js/acad-gamification.js"></script>
  <script>
    document.addEventListener("DOMContentLoaded", function () {
      if (!window.acadGamification) return;
      const grid = document.getElementById("badges-grid");
      if (!grid) return;

      const cards = grid.querySelectorAll(".badge-card");
      cards.forEach(card => {
        const requiredAttr = card.getAttribute("data-required-articles") || "";
        const requiredArticles = requiredAttr.split(",").map(a => a.trim()).filter(Boolean);
        const statusEl = card.querySelector(".badge-status");
        if (!statusEl) return;

        let unlocked = true;
        requiredArticles.forEach(articleId => {
          const read = window.acadGamification.isArticleRead(articleId);
          const perfect = window.acadGamification.hasPerfectQuiz(articleId);
          if (!(read && perfect)) {
            unlocked = false;
          }
        });

        if (unlocked && requiredArticles.length > 0) {
          statusEl.textContent = "âœ… DÃ©verrouillÃ©";
          statusEl.classList.remove("locked");
          statusEl.classList.add("unlocked");
        } else {
          statusEl.textContent = "ğŸ”’ VerrouillÃ©";
          statusEl.classList.remove("unlocked");
          statusEl.classList.add("locked");
        }
      });
    });
  </script>
</body>
</html>
